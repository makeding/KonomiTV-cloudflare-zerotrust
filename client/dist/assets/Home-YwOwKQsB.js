import{B as p,R as v}from"./RecordedProgramList-DAL5woYf.js";import{H as _,N as h}from"./Navigation-BKbgIyPO.js";import{S as f}from"./SPHeaderBar-BFvDoDeb.js";import{V as g}from"./Videos-BrcyprmK.js";import{d as R,q as a,s as w,x as B,c as P,a as t,b as r,o as b,_ as A}from"./index-CzJN5vpE.js";import"./VDialog-C-6Tx4c8.js";import"./VChip-ar_Fnbpl.js";import"./VTextField-DoBCnobE.js";import"./VAvatar-Bt0s3YBV.js";import"./VCard-BJN0RScZ.js";import"./ssrBoot-C9P1f8zl.js";import"./VSelect-BXFh1qyq.js";const E={class:"route-container"},H={class:"videos-home-container-wrapper"},S={class:"videos-home-container"},V=30*1e3,y=R({__name:"Home",setup(I){const n=a([]),i=a(0),s=a(!0),o=a(null),m={recentPrograms:async()=>{const e=await g.fetchAllVideos("desc",1);e&&(n.value=e.recorded_programs.slice(0,10),i.value=e.total),s.value=!1}},c=async()=>{try{await Promise.all(Object.values(m).map(e=>e()))}catch(e){console.error("Failed to update sections:",e)}},d=()=>{o.value===null&&(c(),o.value=window.setInterval(c,V))},u=()=>{o.value!==null&&(clearInterval(o.value),o.value=null)};return w(()=>{d()}),B(()=>{u()}),(e,l)=>(b(),P("div",E,[t(_),r("main",null,[t(h),r("div",H,[t(f),r("div",S,[t(p,{crumbs:[{name:"ビデオをみる",path:"/videos/"},{name:"ホーム",path:"/videos/",disabled:!0}]}),t(v,{title:"新着の録画番組",programs:n.value,total:i.value,hideSort:!0,hidePagination:!0,showMoreButton:!0,showSearch:!0,isLoading:s.value,showEmptyMessage:!s.value,onMore:l[0]||(l[0]=N=>e.$router.push("/videos/programs"))},null,8,["programs","total","isLoading","showEmptyMessage"])])])])]))}}),D=A(y,[["__scopeId","data-v-4cab2d2d"]]);export{D as default};

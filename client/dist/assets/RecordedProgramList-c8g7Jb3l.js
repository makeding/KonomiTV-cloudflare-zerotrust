import{d as J,c as v,F as O,g as se,k as C,h as g,b as e,e as y,t as m,r as D,n as F,o as u,_ as Q,a as l,w as z,A as M,U as H,P as U,N as ve,R as T,q as X,u as me,C as P,l as R,f as ce,p as S,j as _e,Q as x,M as E,ab as ge,E as pe,G as fe,T as he,af as ye,ag as be,ah as ke,ai as we,aj as $e,ak as te,al as Me,am as j,an as I,O as Ve,ao as Be,ap as Le,I as Pe,aq as Ie,ar as Ce,as as Re,at as Se,J as He,au as xe,X as q,av as ae,a3 as oe,V as A,s as ie,B as Ae}from"./index-B7OgWKtM.js";import{V as ze}from"./VDialog-B5uyaSNw.js";import{a as Te,V as Fe}from"./VCard-CZrRuC1N.js";import{V as De}from"./ssrBoot-CgU2lsL7.js";import{V as Ne}from"./Videos-d0PD3lY7.js";import{b as We,V as G,a as K,c as Ee,d as Ue}from"./VSelect-9qvNrm53.js";const Oe={class:"breadcrumbs"},Ye={class:"breadcrumbs__item-text"},je=J({__name:"Breadcrumbs",props:{crumbs:{}},setup(t){return(s,a)=>{const f=D("Icon"),o=D("router-link");return u(),v("div",Oe,[(u(!0),v(O,null,se(s.crumbs,(d,V)=>(u(),C(o,{key:V,to:d.path,class:F(["breadcrumbs__item",{"breadcrumbs__item--disabled":d.disabled}]),event:d.disabled?"":"click"},{default:g(()=>[e("span",Ye,m(d.name),1),V<s.crumbs.length-1?(u(),C(f,{key:0,icon:"fluent:chevron-right-12-regular",width:"16px",class:"breadcrumbs__item-separator"})):y("",!0)]),_:2},1032,["to","class","event"]))),128))])}}}),pa=Q(je,[["__scopeId","data-v-1a3a34d9"]]),qe={class:"px-5 pb-6"},Ge={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-2"},Ke={class:"video-info__item"},Xe={class:"video-info__item-value"},Je={class:"video-info__item"},Qe={class:"video-info__item-value"},Ze={class:"video-info__item"},et={class:"video-info__item-value"},tt={class:"video-info__item"},at={class:"video-info__item-value"},ot={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},it={class:"video-info__item"},st={class:"video-info__item-value"},rt={class:"video-info__item"},lt={class:"video-info__item-value"},dt={class:"video-info__item"},nt={class:"video-info__item-value"},ut={class:"video-info__item"},vt={class:"video-info__item-value"},mt={class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},ct={class:"video-info__item"},_t={class:"video-info__item-value"},gt={class:"video-info__item"},pt={class:"video-info__item-value"},ft={class:"video-info__item"},ht={class:"video-info__item-value"},yt={key:0,class:"text-subtitle-1 d-flex align-center font-weight-bold mt-3"},bt={class:"video-info__item"},kt={class:"video-info__item-value"},wt={class:"video-info__item"},$t={class:"video-info__item-value"},Mt={class:"video-info__item"},Vt={class:"video-info__item-value"},Bt=J({__name:"RecordedFileInfoDialog",props:{program:{},show:{type:Boolean}},emits:["update:show"],setup(t){return(s,a)=>{const f=D("Icon");return u(),C(ze,{"max-width":"770",transition:"slide-y-transition","model-value":s.show,"onUpdate:modelValue":a[1]||(a[1]=o=>s.$emit("update:show",o))},{default:g(()=>[l(Te,{class:"video-info"},{default:g(()=>[l(Fe,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:g(()=>[l(f,{icon:"fluent:document-20-filled",height:"26px"}),a[2]||(a[2]=e("span",{class:"ml-3"},"録画ファイル情報",-1)),l(De),z((u(),v("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:a[0]||(a[0]=o=>s.$emit("update:show",!1))},[l(f,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[T]])]),_:1}),e("div",qe,[e("div",Ge,[l(f,{icon:"fluent:video-clip-20-filled",width:"24px",height:"20px"}),a[3]||(a[3]=e("span",{class:"ml-2"},"ファイル情報",-1))]),e("div",Ke,[a[4]||(a[4]=e("div",{class:"video-info__item-label"},"ファイルパス",-1)),e("div",Xe,m(s.program.recorded_video.file_path),1)]),e("div",Je,[a[5]||(a[5]=e("div",{class:"video-info__item-label"},"ファイルサイズ",-1)),e("div",Qe,m(M(H).formatBytes(s.program.recorded_video.file_size)),1)]),e("div",Ze,[a[6]||(a[6]=e("div",{class:"video-info__item-label"},"録画期間",-1)),e("div",et,m(M(U).getRecordingTime(s.program)),1)]),e("div",tt,[a[7]||(a[7]=e("div",{class:"video-info__item-label"},"最終更新日時",-1)),e("div",at,m(M(ve)(s.program.recorded_video.file_modified_at).format("YYYY/MM/DD (dd) HH:mm:ss")),1)]),e("div",ot,[l(f,{icon:"fluent:video-20-filled",width:"24px",height:"20px"}),a[8]||(a[8]=e("span",{class:"ml-2"},"映像情報",-1))]),e("div",it,[a[9]||(a[9]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",st,m(s.program.recorded_video.video_codec)+" ("+m(s.program.recorded_video.video_codec_profile)+")",1)]),e("div",rt,[a[10]||(a[10]=e("div",{class:"video-info__item-label"},"解像度",-1)),e("div",lt,m(s.program.recorded_video.video_resolution_width)+"×"+m(s.program.recorded_video.video_resolution_height),1)]),e("div",dt,[a[11]||(a[11]=e("div",{class:"video-info__item-label"},"フレームレート",-1)),e("div",nt,m(s.program.recorded_video.video_frame_rate)+" fps",1)]),e("div",ut,[a[12]||(a[12]=e("div",{class:"video-info__item-label"},"スキャン方式",-1)),e("div",vt,m(s.program.recorded_video.video_scan_type),1)]),e("div",mt,[l(f,{icon:"fluent:speaker-2-20-filled",width:"24px",height:"20px"}),a[13]||(a[13]=e("span",{class:"ml-2"},"音声情報（主音声）",-1))]),e("div",ct,[a[14]||(a[14]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",_t,m(s.program.recorded_video.primary_audio_codec),1)]),e("div",gt,[a[15]||(a[15]=e("div",{class:"video-info__item-label"},"チャンネル",-1)),e("div",pt,m(s.program.recorded_video.primary_audio_channel),1)]),e("div",ft,[a[16]||(a[16]=e("div",{class:"video-info__item-label"},"サンプリングレート",-1)),e("div",ht,m(s.program.recorded_video.primary_audio_sampling_rate?`${s.program.recorded_video.primary_audio_sampling_rate/1e3}kHz`:"不明"),1)]),s.program.recorded_video.secondary_audio_codec?(u(),v("div",yt,[l(f,{icon:"fluent:speaker-2-20-filled",width:"24px",height:"20px"}),a[17]||(a[17]=e("span",{class:"ml-2"},"音声情報（副音声）",-1))])):y("",!0),s.program.recorded_video.secondary_audio_codec?(u(),v(O,{key:1},[e("div",bt,[a[18]||(a[18]=e("div",{class:"video-info__item-label"},"コーデック",-1)),e("div",kt,m(s.program.recorded_video.secondary_audio_codec),1)]),e("div",wt,[a[19]||(a[19]=e("div",{class:"video-info__item-label"},"チャンネル",-1)),e("div",$t,m(s.program.recorded_video.secondary_audio_channel),1)]),e("div",Mt,[a[20]||(a[20]=e("div",{class:"video-info__item-label"},"サンプリングレート",-1)),e("div",Vt,m(s.program.recorded_video.secondary_audio_sampling_rate?`${s.program.recorded_video.secondary_audio_sampling_rate/1e3}kHz`:"不明"),1)])],64)):y("",!0)])]),_:1})]),_:1},8,["model-value"])}}}),Lt=Q(Bt,[["__scopeId","data-v-66a6f916"]]),Pt={class:"recorded-program__container"},It={class:"recorded-program__thumbnail"},Ct=["src"],Rt={class:"recorded-program__thumbnail-duration"},St={key:0,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--recording"},Ht={key:1,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--analyzing"},xt={key:2,class:"recorded-program__thumbnail-status recorded-program__thumbnail-status--partial"},At={key:3,class:"recorded-program__thumbnail-progress"},zt={class:"recorded-program__content"},Tt=["innerHTML"],Ft={class:"recorded-program__content-meta"},Dt={key:0,class:"recorded-program__content-meta-broadcaster"},Nt=["src"],Wt={class:"recorded-program__content-meta-broadcaster-name"},Et={key:1,class:"recorded-program__content-meta-broadcaster"},Ut={class:"recorded-program__content-meta-time"},Ot=["innerHTML"],Yt={key:0,width:"22px",height:"22px",viewBox:"0 0 16 16"},jt={key:0,width:"22px",height:"22px",viewBox:"0 0 16 16"},qt={key:1,width:"22px",height:"22px",viewBox:"0 0 15.2 15.2"},Gt={class:"recorded-program__menu"},Kt=J({__name:"RecordedProgram",props:{program:{},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1}},setup(t){const s=t,a=X(!1),f=()=>{window.location.href=`${H.api_base_url}/videos/${s.program.id}/download`},o=async(r=!1)=>{E.success("サムネイルの再作成を開始しました。完了までしばらくお待ちください。"),(await Ne.regenerateThumbnail(s.program.id,r)).is_success&&E.success("サムネイルの再作成が完了しました。")},d=me(),V=()=>{d.settings.mylist.some(i=>i.type==="RecordedProgram"&&i.id===s.program.id)?(d.settings.mylist=d.settings.mylist.filter(i=>!(i.type==="RecordedProgram"&&i.id===s.program.id)),E.show("マイリストから削除しました。")):(d.settings.mylist.push({type:"RecordedProgram",id:s.program.id,created_at:H.time()}),E.success("マイリストに追加しました。"))},_=P(()=>d.settings.mylist.some(r=>r.type==="RecordedProgram"&&r.id===s.program.id)),Y=P(()=>d.settings.watched_history.find(r=>r.video_id===s.program.id)),Z=()=>{d.settings.watched_history=d.settings.watched_history.filter(r=>r.video_id!==s.program.id),E.show("視聴履歴から削除しました。")};return(r,i)=>{const h=D("Icon"),b=D("router-link"),k=_e("ftooltip");return u(),v(O,null,[z((u(),C(b,{class:F(["recorded-program",{"recorded-program--recording":r.program.recorded_video.status==="Recording","recorded-program--analyzing":!r.program.recorded_video.has_key_frames}]),to:r.program.recorded_video.status==="Recording"||!r.program.recorded_video.has_key_frames?{path:""}:`/videos/watch/${r.program.id}`},{default:g(()=>[e("div",Pt,[e("div",It,[e("img",{class:"recorded-program__thumbnail-image",loading:"lazy",decoding:"async",src:`${M(H).api_base_url}/videos/${r.program.id}/thumbnail`},null,8,Ct),e("div",Rt,m(M(U).getProgramDuration(r.program)),1),r.program.recorded_video.status==="Recording"?(u(),v("div",St,i[8]||(i[8]=[e("div",{class:"recorded-program__thumbnail-status-dot"},null,-1),R(" 録画中 ")]))):r.program.recorded_video.has_key_frames?r.program.is_partially_recorded?(u(),v("div",xt," ⚠️ 一部のみ録画 ")):y("",!0):(u(),v("div",Ht,[l(h,{icon:"fluent:clock-12-regular",width:"15px",height:"15px"}),i[9]||(i[9]=R(" メタデータ解析中 "))])),Y.value?(u(),v("div",At,[e("div",{class:"recorded-program__thumbnail-progress-bar",style:ce(`width: ${Y.value.last_playback_position/r.program.recorded_video.duration*100}%`)},null,4)])):y("",!0)]),e("div",zt,[e("div",{class:"recorded-program__content-title",innerHTML:M(U).decorateProgramInfo(r.program,"title")},null,8,Tt),e("div",Ft,[r.program.channel?(u(),v("div",Dt,[e("img",{class:"recorded-program__content-meta-broadcaster-icon",loading:"lazy",decoding:"async",src:`${M(H).api_base_url}/channels/${r.program.channel.id}/logo`},null,8,Nt),e("span",Wt,"Ch: "+m(r.program.channel.channel_number)+" "+m(r.program.channel.name),1)])):(u(),v("div",Et,i[10]||(i[10]=[e("span",{class:"recorded-program__content-meta-broadcaster-name"},"チャンネル情報なし",-1)]))),e("div",Ut,m(M(U).getProgramTime(r.program)),1)]),e("div",{class:"recorded-program__content-description",innerHTML:M(U).decorateProgramInfo(r.program,"description")},null,8,Ot)]),r.forWatchedHistory?y("",!0):z((u(),v("div",{key:0,class:F(["recorded-program__mylist",{"recorded-program__mylist--highlight":_.value&&!r.forMylist}]),onClick:S(V,["prevent","stop"]),onMousedown:i[0]||(i[0]=S(()=>{},["prevent","stop"]))},[r.forMylist?(u(),v("svg",Yt,i[11]||(i[11]=[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0M6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5"},null,-1)]))):(u(),v(O,{key:1},[_.value?(u(),v("svg",jt,i[12]||(i[12]=[e("path",{fill:"currentColor",d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032"},null,-1)]))):(u(),v("svg",qt,i[13]||(i[13]=[e("path",{fill:"currentColor",d:"M8 2.5a.5.5 0 0 0-1 0V7H2.5a.5.5 0 0 0 0 1H7v4.5a.5.5 0 0 0 1 0V8h4.5a.5.5 0 0 0 0-1H8z"},null,-1)])))],64))],34)),[[T],[k,_.value?"マイリストから削除する":"マイリストに追加する"]]),r.forWatchedHistory?z((u(),v("div",{key:1,class:"recorded-program__mylist",onClick:S(Z,["prevent","stop"]),onMousedown:i[1]||(i[1]=S(()=>{},["prevent","stop"]))},i[14]||(i[14]=[e("svg",{width:"22px",height:"22px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0M6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0zM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5"})],-1)]),32)),[[T],[k,"視聴履歴から削除する"]]):y("",!0),e("div",Gt,[l(Ee,{location:"bottom end","close-on-content-click":!0},{activator:g(({props:B})=>[z((u(),v("div",x({class:"recorded-program__menu-button"},B,{onClick:i[2]||(i[2]=S(()=>{},["prevent","stop"])),onMousedown:i[3]||(i[3]=S(()=>{},["prevent","stop"]))}),i[15]||(i[15]=[e("svg",{width:"19px",height:"19px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M9.5 13a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0"})],-1)]),16)),[[T]])]),default:g(()=>[l(We,{density:"compact","bg-color":"background-lighten-1",class:"recorded-program__menu-list"},{default:g(()=>[l(G,{onClick:i[4]||(i[4]=B=>a.value=!0)},{prepend:g(()=>i[16]||(i[16]=[e("svg",{width:"20px",height:"20px",viewBox:"0 0 16 16"},[e("path",{fill:"currentColor",d:"M8.499 7.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm.25-2a.749.749 0 1 1-1.499 0a.749.749 0 0 1 1.498 0M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1M2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8"})],-1)])),default:g(()=>[l(K,{class:"ml-3"},{default:g(()=>i[17]||(i[17]=[R("録画ファイル情報を表示")])),_:1})]),_:1}),l(G,{onClick:f,disabled:r.program.recorded_video.status==="Recording"},{prepend:g(()=>[l(h,{icon:"fluent:arrow-download-24-regular",width:"20px",height:"20px"})]),default:g(()=>[l(K,{class:"ml-3"},{default:g(()=>[R("録画ファイルをダウンロード ("+m(M(H).formatBytes(r.program.recorded_video.file_size))+")",1)]),_:1})]),_:1},8,["disabled"]),l(G,{onClick:i[5]||(i[5]=B=>o(!0))},{prepend:g(()=>[l(h,{icon:"fluent:image-arrow-counterclockwise-24-regular",width:"20px",height:"20px"})]),default:g(()=>[l(K,{class:"ml-3"},{default:g(()=>i[18]||(i[18]=[R("サムネイルを再作成")])),_:1})]),_:1}),l(G,{onClick:i[6]||(i[6]=B=>o(!1))},{prepend:g(()=>[l(h,{icon:"fluent:image-arrow-counterclockwise-24-regular",width:"20px",height:"20px"})]),default:g(()=>[l(K,{class:"ml-3"},{default:g(()=>i[19]||(i[19]=[R("シークバー用サムネイルを再作成")])),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1},8,["to","class"])),[[T]]),l(Lt,{program:r.program,show:a.value,"onUpdate:show":i[7]||(i[7]=B=>a.value=B)},null,8,["program","show"])],64)}}}),Xt=Q(Kt,[["__scopeId","data-v-60cb8bae"]]);function Jt(){const t=X([]);ge(()=>t.value=[]);function s(a,f){t.value[f]=a}return{refs:t,updateRef:s}}const Qt=fe({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:q,default:"$first"},prevIcon:{type:q,default:"$prev"},nextIcon:{type:q,default:"$next"},lastIcon:{type:q,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...xe(),...He(),...Se(),...Re(),...Ce(),...Ie(),...Pe({tag:"nav"}),...Le(),...Be({variant:"text"})},"VPagination"),Zt=pe()({name:"VPagination",props:Qt(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,s){let{slots:a,emit:f}=s;const o=he(t,"modelValue"),{t:d,n:V}=ye(),{isRtl:_}=be(),{themeClasses:Y}=ke(t),{width:Z}=we(),r=$e(-1);te(void 0,{scoped:!0});const{resizeRef:i}=Me(n=>{if(!n.length)return;const{target:c,contentRect:p}=n[0],w=c.querySelector(".v-pagination__list > *");if(!w)return;const $=p.width,W=w.offsetWidth+parseFloat(getComputedStyle(w).marginRight)*2;r.value=B($,W)}),h=P(()=>parseInt(t.length,10)),b=P(()=>parseInt(t.start,10)),k=P(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):r.value>=0?r.value:B(Z.value,58));function B(n,c){const p=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((n-c*p)/c).toFixed(2)))}const re=P(()=>{if(h.value<=0||isNaN(h.value)||h.value>Number.MAX_SAFE_INTEGER)return[];if(k.value<=0)return[];if(k.value===1)return[o.value];if(h.value<=k.value)return j(h.value,b.value);const n=k.value%2===0,c=n?k.value/2:Math.floor(k.value/2),p=n?c:c+1,w=h.value-c;if(p-o.value>=0)return[...j(Math.max(1,k.value-1),b.value),t.ellipsis,h.value];if(o.value-w>=(n?1:0)){const $=k.value-1,W=h.value-$+b.value;return[b.value,t.ellipsis,...j($,W)]}else{const $=Math.max(1,k.value-2),W=$===1?o.value:o.value-Math.ceil($/2)+b.value;return[b.value,t.ellipsis,...j($,W),t.ellipsis,h.value]}});function N(n,c,p){n.preventDefault(),o.value=c,p&&f(p,c)}const{refs:le,updateRef:de}=Jt();te({VPaginationBtn:{color:I(t,"color"),border:I(t,"border"),density:I(t,"density"),size:I(t,"size"),variant:I(t,"variant"),rounded:I(t,"rounded"),elevation:I(t,"elevation")}});const ne=P(()=>re.value.map((n,c)=>{const p=w=>de(w,c);if(typeof n=="string")return{isActive:!1,key:`ellipsis-${c}`,page:n,props:{ref:p,ellipsis:!0,icon:!0,disabled:!0}};{const w=n===o.value;return{isActive:w,key:n,page:V(n),props:{ref:p,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:w?t.activeColor:t.color,"aria-current":w,"aria-label":d(w?t.currentPageAriaLabel:t.pageAriaLabel,n),onClick:$=>N($,n)}}}})),L=P(()=>{const n=!!t.disabled||o.value<=b.value,c=!!t.disabled||o.value>=b.value+h.value-1;return{first:t.showFirstLastPage?{icon:_.value?t.lastIcon:t.firstIcon,onClick:p=>N(p,b.value,"first"),disabled:n,"aria-label":d(t.firstAriaLabel),"aria-disabled":n}:void 0,prev:{icon:_.value?t.nextIcon:t.prevIcon,onClick:p=>N(p,o.value-1,"prev"),disabled:n,"aria-label":d(t.previousAriaLabel),"aria-disabled":n},next:{icon:_.value?t.prevIcon:t.nextIcon,onClick:p=>N(p,o.value+1,"next"),disabled:c,"aria-label":d(t.nextAriaLabel),"aria-disabled":c},last:t.showFirstLastPage?{icon:_.value?t.firstIcon:t.lastIcon,onClick:p=>N(p,b.value+h.value-1,"last"),disabled:c,"aria-label":d(t.lastAriaLabel),"aria-disabled":c}:void 0}});function ee(){var c;const n=o.value-b.value;(c=le.value[n])==null||c.$el.focus()}function ue(n){n.key===ae.left&&!t.disabled&&o.value>+t.start?(o.value=o.value-1,oe(ee)):n.key===ae.right&&!t.disabled&&o.value<b.value+h.value-1&&(o.value=o.value+1,oe(ee))}return Ve(()=>l(t.tag,{ref:i,class:["v-pagination",Y.value,t.class],style:t.style,role:"navigation","aria-label":d(t.ariaLabel),onKeydown:ue,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(L.value.first):l(A,x({_as:"VPaginationBtn"},L.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(L.value.prev):l(A,x({_as:"VPaginationBtn"},L.value.prev),null)]),ne.value.map((n,c)=>l("li",{key:n.key,class:["v-pagination__item",{"v-pagination__item--is-active":n.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(n):l(A,x({_as:"VPaginationBtn"},n.props),{default:()=>[n.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(L.value.next):l(A,x({_as:"VPaginationBtn"},L.value.next),null)]),t.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(L.value.last):l(A,x({_as:"VPaginationBtn"},L.value.last),null)])])]})),{}}}),ea={key:0,class:"recorded-program-list__header"},ta={class:"recorded-program-list__title"},aa={class:"recorded-program-list__title-text"},oa={key:1,class:"recorded-program-list__title-count"},ia={key:1,class:"recorded-program-list__pagination"},sa={key:2,class:"recorded-program-list__empty"},ra={class:"recorded-program-list__empty-content"},la=["innerHTML"],da=["innerHTML"],na=J({__name:"RecordedProgramList",props:{title:{},programs:{},total:{},page:{default:1},sortOrder:{default:"desc"},hideHeader:{type:Boolean,default:!1},hideSort:{type:Boolean,default:!1},hidePagination:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},showEmptyMessage:{type:Boolean,default:!0},emptyMessage:{default:"録画番組が見つかりませんでした。"},emptySubMessage:{default:'サーバー設定で録画フォルダのパスを<br class="d-sm-none">正しく設定できているか確認してください。'},isLoading:{type:Boolean,default:!1},forMylist:{type:Boolean,default:!1},forWatchedHistory:{type:Boolean,default:!1}},emits:["update:page","update:sortOrder","more"],setup(t){Ae();const s=t,a=X(s.page),f=X(s.sortOrder);return ie(()=>s.page,o=>{a.value=o}),ie(()=>s.sortOrder,o=>{f.value=o}),(o,d)=>{const V=D("Icon");return u(),v("div",{class:F(["recorded-program-list",{"recorded-program-list--show-sort":!o.hideSort}])},[o.hideHeader?y("",!0):(u(),v("div",ea,[e("h2",ta,[o.showBackButton?z((u(),v("div",{key:0,class:"recorded-program-list__title-back",onClick:d[0]||(d[0]=_=>o.$router.back())},[l(V,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[T]]):y("",!0),e("span",aa,m(o.title),1),o.showMoreButton?y("",!0):(u(),v("div",oa,m(o.total)+"件",1))]),e("div",{class:F(["recorded-program-list__actions",{"recorded-program-list__actions--mylist":o.forMylist}])},[o.hideSort?y("",!0):(u(),C(Ue,{key:0,modelValue:f.value,"onUpdate:modelValue":[d[1]||(d[1]=_=>f.value=_),d[2]||(d[2]=_=>o.$emit("update:sortOrder",_))],items:o.forMylist?[{title:"追加が新しい順",value:"mylist_added_desc"},{title:"追加が古い順",value:"mylist_added_asc"},{title:"録画が新しい順",value:"recorded_desc"},{title:"録画が古い順",value:"recorded_asc"}]:[{title:"新しい順",value:"desc"},{title:"古い順",value:"asc"}],"item-title":"title","item-value":"value",class:"recorded-program-list__sort",color:"primary","bg-color":"background-lighten-1",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue","items"])),o.showMoreButton?(u(),C(A,{key:1,variant:"text",class:"recorded-program-list__more",onClick:d[3]||(d[3]=_=>o.$emit("more"))},{default:g(()=>[d[6]||(d[6]=e("span",{class:"text-primary"},"もっと見る",-1)),l(V,{icon:"fluent:chevron-right-12-regular",width:"18px",class:"ml-1 text-text-darken-1",style:{margin:"0px -4px"}})]),_:1})):y("",!0)],2)])),e("div",{class:F(["recorded-program-list__grid",{"recorded-program-list__grid--loading":o.isLoading}])},[(u(!0),v(O,null,se(o.programs,_=>(u(),C(Xt,{key:_.id,program:_,forMylist:o.forMylist,forWatchedHistory:o.forWatchedHistory},null,8,["program","forMylist","forWatchedHistory"]))),128))],2),!o.hidePagination&&o.total>0?(u(),v("div",ia,[l(Zt,{modelValue:a.value,"onUpdate:modelValue":[d[4]||(d[4]=_=>a.value=_),d[5]||(d[5]=_=>o.$emit("update:page",_))],"active-color":"primary",density:"comfortable",length:Math.ceil(o.total/30),"total-visible":7},null,8,["modelValue","length"])])):y("",!0),o.total===0&&o.showEmptyMessage?(u(),v("div",sa,[e("div",ra,[e("h2",{innerHTML:o.emptyMessage},null,8,la),o.emptySubMessage?(u(),v("div",{key:0,class:"recorded-program-list__empty-submessage",innerHTML:o.emptySubMessage},null,8,da)):y("",!0)])])):y("",!0)],2)}}}),fa=Q(na,[["__scopeId","data-v-b189d9a3"]]);export{pa as B,fa as R};

var Jn=Object.defineProperty;var Zn=(t,e,r)=>e in t?Jn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Pe=(t,e,r)=>Zn(t,typeof e!="symbol"?e+"":e,r);import{a8 as Ce,Y as Xn,cj as Qn,l as ye,a6 as an,a5 as Kn,ck as gt,M as we,K as je,U as be,cl as eo}from"./index-BhBe4R2M.js";import{u as ht,I as to,b as ro}from"./ChannelsStore-BitPjBk-.js";function no(t){return{all:t=t||new Map,on:function(e,r){var a=t.get(e);a?a.push(r):t.set(e,[r])},off:function(e,r){var a=t.get(e);a&&(r?a.splice(a.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var a=t.get(e);a&&a.slice().map(function(i){i(r)}),(a=t.get("*"))&&a.slice().map(function(i){i(e,r)})}}}const oo={id:-1,file_path:"",file_hash:"",file_size:0,recording_start_time:null,recording_end_time:null,duration:0,container_format:"MPEG-TS",video_codec:"MPEG-2",video_codec_profile:"High",video_scan_type:"Interlaced",video_frame_rate:29.97,video_resolution_width:1440,video_resolution_height:1080,primary_audio_codec:"AAC-LC",primary_audio_channel:"Stereo",primary_audio_sampling_rate:48e3,secondary_audio_codec:null,secondary_audio_channel:null,secondary_audio_sampling_rate:null,cm_sections:[]},dr={id:-1,recorded_video:oo,recording_start_margin:0,recording_end_margin:0,is_partially_recorded:!1,channel:null,network_id:null,service_id:null,event_id:null,series_id:null,series_broadcast_period_id:null,title:"取得中…",series_title:null,episode_number:null,subtitle:null,description:"取得中…",detail:{},start_time:"2000-01-01T00:00:00+09:00",end_time:"2000-01-01T00:00:00+09:00",duration:0,is_free:!0,genres:[],primary_audio_type:"2/0モード(ステレオ)",primary_audio_language:"日本語",secondary_audio_type:null,secondary_audio_language:null};class tc{static async fetchVideo(e){const r=await Ce.get(`/videos/${e}`);return r.type==="error"?(Ce.showGenericError(r,"録画番組情報を取得できませんでした。"),null):r.data}static async fetchVideoJikkyoComments(e){const r=await Ce.get(`/videos/${e}/jikkyo`);return r.type==="error"?(Ce.showGenericError(r,"過去ログコメントを取得できませんでした。"),{is_success:!1,comments:[],detail:"過去ログコメントを取得できませんでした。"}):(r.data.comments=r.data.comments.filter(a=>Xn.isMutedComment(a.text,a.author,a.color,a.type,a.size)===!1),r.data)}}const gr=Qn("player",{state:()=>({is_watching:!1,is_player_initialized:!1,event_emitter:no(),recorded_program:dr,is_virtual_keyboard_display:!1,is_fullscreen:!1,is_document_pip:!1,is_control_display:!0,is_panel_display:(()=>{const t=ye();switch(t.settings.panel_display_state){case"AlwaysDisplay":return!0;case"AlwaysFold":return!1;case"RestorePreviousState":return t.settings.showed_panel_last_time}})(),tv_panel_active_tab:ye().settings.tv_panel_active_tab,video_panel_active_tab:ye().settings.video_panel_active_tab,twitter_active_tab:ye().settings.twitter_active_tab,is_remocon_display:!1,is_zapping:!1,is_loading:!0,is_video_buffering:!0,is_video_paused:!1,is_background_display:!1,background_url:"",shortcut_key_modal:!1,lshaped_screen_crop_settings_modal:!1,live_stream_status:null,live_comment_init_failed_message:null,video_comment_init_failed_message:null,twitter_captures:[],twitter_selected_capture_blobs:[],twitter_zoom_capture_modal:!1,twitter_zoom_capture:null}),actions:{startWatching(){this.reset(),this.is_watching=!0},stopWatching(){this.reset(),this.is_watching=!1},reset(){this.is_watching=!1,this.is_player_initialized=!1,this.recorded_program=dr,this.is_virtual_keyboard_display=!1,this.is_fullscreen=!1,this.is_document_pip=!1,this.is_control_display=!0,this.is_panel_display=(()=>{const t=ye();switch(t.settings.panel_display_state){case"AlwaysDisplay":return!0;case"AlwaysFold":return!1;case"RestorePreviousState":return t.settings.showed_panel_last_time}})(),this.tv_panel_active_tab=ye().settings.tv_panel_active_tab,this.video_panel_active_tab=ye().settings.video_panel_active_tab,this.twitter_active_tab=ye().settings.twitter_active_tab,this.is_remocon_display=!1,this.is_zapping=!1,this.is_loading=!0,this.is_video_buffering=!0,this.is_video_paused=!1,this.is_background_display=!1,this.background_url="",this.shortcut_key_modal=!1,this.live_stream_status=null,this.live_comment_init_failed_message=null,this.twitter_captures=[],this.twitter_zoom_capture_modal=!1,this.twitter_zoom_capture=null}}});var mt={exports:{}},vt={},Be={},cn={},ar=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),a=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var p in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var d=Object.getOwnPropertySymbols(e);if(d.length!==1||d[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,r);if(l.value!==i||l.enumerable!==!0)return!1}return!0},ao=ar,ut=function(){return ao()&&!!Symbol.toStringTag},ir=Object,io=Error,co=EvalError,so=RangeError,uo=ReferenceError,sn=SyntaxError,Ge=TypeError,fo=URIError,lo=Math.abs,po=Math.floor,yo=Math.max,go=Math.min,ho=Math.pow,mo=Math.round,vo=Number.isNaN||function(e){return e!==e},bo=vo,_o=function(e){return bo(e)||e===0?e:e<0?-1:1},wo=Object.getOwnPropertyDescriptor,Ye=wo;if(Ye)try{Ye([],"length")}catch{Ye=null}var Me=Ye,Je=Object.defineProperty||!1;if(Je)try{Je({},"a",{value:1})}catch{Je=!1}var ft=Je,bt,hr;function So(){if(hr)return bt;hr=1;var t=typeof Symbol<"u"&&Symbol,e=ar;return bt=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},bt}var _t,mr;function un(){return mr||(mr=1,_t=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_t}var wt,vr;function fn(){if(vr)return wt;vr=1;var t=ir;return wt=t.getPrototypeOf||null,wt}var St,br;function Eo(){if(br)return St;br=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,a="[object Function]",i=function(b,v){for(var S=[],j=0;j<b.length;j+=1)S[j]=b[j];for(var _=0;_<v.length;_+=1)S[_+b.length]=v[_];return S},p=function(b,v){for(var S=[],j=v,_=0;j<b.length;j+=1,_+=1)S[_]=b[j];return S},d=function(l,b){for(var v="",S=0;S<l.length;S+=1)v+=l[S],S+1<l.length&&(v+=b);return v};return St=function(b){var v=this;if(typeof v!="function"||e.apply(v)!==a)throw new TypeError(t+v);for(var S=p(arguments,1),j,_=function(){if(this instanceof j){var U=v.apply(this,i(S,arguments));return Object(U)===U?U:this}return v.apply(b,i(S,arguments))},R=r(0,v.length-S.length),G=[],V=0;V<R;V++)G[V]="$"+V;if(j=Function("binder","return function ("+d(G,",")+"){ return binder.apply(this,arguments); }")(_),v.prototype){var K=function(){};K.prototype=v.prototype,j.prototype=new K,K.prototype=null}return j},St}var Et,_r;function He(){if(_r)return Et;_r=1;var t=Eo();return Et=Function.prototype.bind||t,Et}var At,wr;function cr(){return wr||(wr=1,At=Function.prototype.call),At}var Ot,Sr;function sr(){return Sr||(Sr=1,Ot=Function.prototype.apply),Ot}var Ao=typeof Reflect<"u"&&Reflect&&Reflect.apply,Oo=He(),Po=sr(),jo=cr(),Ro=Ao,ln=Ro||Oo.call(jo,Po),Io=He(),To=Ge,$o=cr(),Co=ln,ur=function(e){if(e.length<1||typeof e[0]!="function")throw new To("a function is required");return Co(Io,$o,e)},Pt,Er;function No(){if(Er)return Pt;Er=1;var t=ur,e=Me,r;try{r=[].__proto__===Array.prototype}catch(d){if(!d||typeof d!="object"||!("code"in d)||d.code!=="ERR_PROTO_ACCESS")throw d}var a=!!r&&e&&e(Object.prototype,"__proto__"),i=Object,p=i.getPrototypeOf;return Pt=a&&typeof a.get=="function"?t([a.get]):typeof p=="function"?function(l){return p(l==null?l:i(l))}:!1,Pt}var jt,Ar;function pn(){if(Ar)return jt;Ar=1;var t=un(),e=fn(),r=No();return jt=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:r?function(i){return r(i)}:null,jt}var Rt,Or;function yn(){if(Or)return Rt;Or=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=He();return Rt=r.call(t,e),Rt}var W,Fo=ir,Bo=io,Do=co,Mo=so,qo=uo,De=sn,Fe=Ge,ko=fo,Uo=lo,xo=po,Lo=yo,Go=go,Ho=ho,zo=mo,Vo=_o,dn=Function,It=function(t){try{return dn('"use strict"; return ('+t+").constructor;")()}catch{}},Le=Me,Wo=ft,Tt=function(){throw new Fe},Yo=Le?function(){try{return arguments.callee,Tt}catch{try{return Le(arguments,"callee").get}catch{return Tt}}}():Tt,Re=So()(),oe=pn(),Jo=fn(),Zo=un(),gn=sr(),ze=cr(),Te={},Xo=typeof Uint8Array>"u"||!oe?W:oe(Uint8Array),Ee={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?W:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?W:ArrayBuffer,"%ArrayIteratorPrototype%":Re&&oe?oe([][Symbol.iterator]()):W,"%AsyncFromSyncIteratorPrototype%":W,"%AsyncFunction%":Te,"%AsyncGenerator%":Te,"%AsyncGeneratorFunction%":Te,"%AsyncIteratorPrototype%":Te,"%Atomics%":typeof Atomics>"u"?W:Atomics,"%BigInt%":typeof BigInt>"u"?W:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?W:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?W:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?W:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Bo,"%eval%":eval,"%EvalError%":Do,"%Float32Array%":typeof Float32Array>"u"?W:Float32Array,"%Float64Array%":typeof Float64Array>"u"?W:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?W:FinalizationRegistry,"%Function%":dn,"%GeneratorFunction%":Te,"%Int8Array%":typeof Int8Array>"u"?W:Int8Array,"%Int16Array%":typeof Int16Array>"u"?W:Int16Array,"%Int32Array%":typeof Int32Array>"u"?W:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Re&&oe?oe(oe([][Symbol.iterator]())):W,"%JSON%":typeof JSON=="object"?JSON:W,"%Map%":typeof Map>"u"?W:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Re||!oe?W:oe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Fo,"%Object.getOwnPropertyDescriptor%":Le,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?W:Promise,"%Proxy%":typeof Proxy>"u"?W:Proxy,"%RangeError%":Mo,"%ReferenceError%":qo,"%Reflect%":typeof Reflect>"u"?W:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?W:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Re||!oe?W:oe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?W:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Re&&oe?oe(""[Symbol.iterator]()):W,"%Symbol%":Re?Symbol:W,"%SyntaxError%":De,"%ThrowTypeError%":Yo,"%TypedArray%":Xo,"%TypeError%":Fe,"%Uint8Array%":typeof Uint8Array>"u"?W:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?W:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?W:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?W:Uint32Array,"%URIError%":ko,"%WeakMap%":typeof WeakMap>"u"?W:WeakMap,"%WeakRef%":typeof WeakRef>"u"?W:WeakRef,"%WeakSet%":typeof WeakSet>"u"?W:WeakSet,"%Function.prototype.call%":ze,"%Function.prototype.apply%":gn,"%Object.defineProperty%":Wo,"%Object.getPrototypeOf%":Jo,"%Math.abs%":Uo,"%Math.floor%":xo,"%Math.max%":Lo,"%Math.min%":Go,"%Math.pow%":Ho,"%Math.round%":zo,"%Math.sign%":Vo,"%Reflect.getPrototypeOf%":Zo};if(oe)try{null.error}catch(t){var Qo=oe(oe(t));Ee["%Error.prototype%"]=Qo}var Ko=function t(e){var r;if(e==="%AsyncFunction%")r=It("async function () {}");else if(e==="%GeneratorFunction%")r=It("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=It("async function* () {}");else if(e==="%AsyncGenerator%"){var a=t("%AsyncGeneratorFunction%");a&&(r=a.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&oe&&(r=oe(i.prototype))}return Ee[e]=r,r},Pr={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ve=He(),rt=yn(),ea=Ve.call(ze,Array.prototype.concat),ta=Ve.call(gn,Array.prototype.splice),jr=Ve.call(ze,String.prototype.replace),nt=Ve.call(ze,String.prototype.slice),ra=Ve.call(ze,RegExp.prototype.exec),na=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,oa=/\\(\\)?/g,aa=function(e){var r=nt(e,0,1),a=nt(e,-1);if(r==="%"&&a!=="%")throw new De("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&r!=="%")throw new De("invalid intrinsic syntax, expected opening `%`");var i=[];return jr(e,na,function(p,d,l,b){i[i.length]=l?jr(b,oa,"$1"):d||p}),i},ia=function(e,r){var a=e,i;if(rt(Pr,a)&&(i=Pr[a],a="%"+i[0]+"%"),rt(Ee,a)){var p=Ee[a];if(p===Te&&(p=Ko(a)),typeof p>"u"&&!r)throw new Fe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:a,value:p}}throw new De("intrinsic "+e+" does not exist!")},fr=function(e,r){if(typeof e!="string"||e.length===0)throw new Fe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Fe('"allowMissing" argument must be a boolean');if(ra(/^%?[^%]*%?$/,e)===null)throw new De("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=aa(e),i=a.length>0?a[0]:"",p=ia("%"+i+"%",r),d=p.name,l=p.value,b=!1,v=p.alias;v&&(i=v[0],ta(a,ea([0,1],v)));for(var S=1,j=!0;S<a.length;S+=1){var _=a[S],R=nt(_,0,1),G=nt(_,-1);if((R==='"'||R==="'"||R==="`"||G==='"'||G==="'"||G==="`")&&R!==G)throw new De("property names with quotes must have matching quotes");if((_==="constructor"||!j)&&(b=!0),i+="."+_,d="%"+i+"%",rt(Ee,d))l=Ee[d];else if(l!=null){if(!(_ in l)){if(!r)throw new Fe("base intrinsic for "+e+" exists, but the property is not available.");return}if(Le&&S+1>=a.length){var V=Le(l,_);j=!!V,j&&"get"in V&&!("originalValue"in V.get)?l=V.get:l=l[_]}else j=rt(l,_),l=l[_];j&&!b&&(Ee[d]=l)}}return l},hn=fr,mn=ur,ca=mn([hn("%String.prototype.indexOf%")]),qe=function(e,r){var a=hn(e,!!r);return typeof a=="function"&&ca(e,".prototype.")>-1?mn([a]):a},sa=ut(),ua=qe,Jt=ua("Object.prototype.toString"),lt=function(e){return sa&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Jt(e)==="[object Arguments]"},vn=function(e){return lt(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&Jt(e)!=="[object Array]"&&"callee"in e&&Jt(e.callee)==="[object Function]"},fa=function(){return lt(arguments)}();lt.isLegacyArguments=vn;var la=fa?lt:vn,Rr=qe,pa=ut(),ya=yn(),da=Me,Zt;if(pa){var ga=Rr("RegExp.prototype.exec"),Ir={},$t=function(){throw Ir},Tr={toString:$t,valueOf:$t};typeof Symbol.toPrimitive=="symbol"&&(Tr[Symbol.toPrimitive]=$t),Zt=function(e){if(!e||typeof e!="object")return!1;var r=da(e,"lastIndex"),a=r&&ya(r,"value");if(!a)return!1;try{ga(e,Tr)}catch(i){return i===Ir}}}else{var ha=Rr("Object.prototype.toString"),ma="[object RegExp]";Zt=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:ha(e)===ma}}var va=Zt,ba=qe,_a=va,wa=ba("RegExp.prototype.exec"),Sa=Ge,Ea=function(e){if(!_a(e))throw new Sa("`regex` must be a RegExp");return function(a){return wa(e,a)!==null}},bn=qe,Aa=Ea,Oa=Aa(/^\s*(?:function)?\*/),_n=ut(),Ct=pn(),Pa=bn("Object.prototype.toString"),ja=bn("Function.prototype.toString"),Ra=function(){if(!_n)return!1;try{return Function("return function*() {}")()}catch{}},Nt,Ia=function(e){if(typeof e!="function")return!1;if(Oa(ja(e)))return!0;if(!_n){var r=Pa(e);return r==="[object GeneratorFunction]"}if(!Ct)return!1;if(typeof Nt>"u"){var a=Ra();Nt=a?Ct(a):!1}return Ct(e)===Nt},wn=Function.prototype.toString,Ne=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Xt,Ze;if(typeof Ne=="function"&&typeof Object.defineProperty=="function")try{Xt=Object.defineProperty({},"length",{get:function(){throw Ze}}),Ze={},Ne(function(){throw 42},null,Xt)}catch(t){t!==Ze&&(Ne=null)}else Ne=null;var Ta=/^\s*class\b/,Qt=function(e){try{var r=wn.call(e);return Ta.test(r)}catch{return!1}},Ft=function(e){try{return Qt(e)?!1:(wn.call(e),!0)}catch{return!1}},Xe=Object.prototype.toString,$a="[object Object]",Ca="[object Function]",Na="[object GeneratorFunction]",Fa="[object HTMLAllCollection]",Ba="[object HTML document.all class]",Da="[object HTMLCollection]",Ma=typeof Symbol=="function"&&!!Symbol.toStringTag,qa=!(0 in[,]),Kt=function(){return!1};if(typeof document=="object"){var ka=document.all;Xe.call(ka)===Xe.call(document.all)&&(Kt=function(e){if((qa||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Xe.call(e);return(r===Fa||r===Ba||r===Da||r===$a)&&e("")==null}catch{}return!1})}var Ua=Ne?function(e){if(Kt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Ne(e,null,Xt)}catch(r){if(r!==Ze)return!1}return!Qt(e)&&Ft(e)}:function(e){if(Kt(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Ma)return Ft(e);if(Qt(e))return!1;var r=Xe.call(e);return r!==Ca&&r!==Na&&!/^\[object HTML/.test(r)?!1:Ft(e)},xa=Ua,La=Object.prototype.toString,Sn=Object.prototype.hasOwnProperty,Ga=function(e,r,a){for(var i=0,p=e.length;i<p;i++)Sn.call(e,i)&&(a==null?r(e[i],i,e):r.call(a,e[i],i,e))},Ha=function(e,r,a){for(var i=0,p=e.length;i<p;i++)a==null?r(e.charAt(i),i,e):r.call(a,e.charAt(i),i,e)},za=function(e,r,a){for(var i in e)Sn.call(e,i)&&(a==null?r(e[i],i,e):r.call(a,e[i],i,e))},Va=function(e,r,a){if(!xa(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=a),La.call(e)==="[object Array]"?Ga(e,r,i):typeof e=="string"?Ha(e,r,i):za(e,r,i)},Wa=Va,Ya=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Bt=Ya,Ja=typeof globalThis>"u"?an:globalThis,Za=function(){for(var e=[],r=0;r<Bt.length;r++)typeof Ja[Bt[r]]=="function"&&(e[e.length]=Bt[r]);return e},En={exports:{}},$r=ft,Xa=sn,Ie=Ge,Cr=Me,An=function(e,r,a){if(!e||typeof e!="object"&&typeof e!="function")throw new Ie("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Ie("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ie("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ie("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ie("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ie("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,p=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,b=!!Cr&&Cr(e,r);if($r)$r(e,r,{configurable:d===null&&b?b.configurable:!d,enumerable:i===null&&b?b.enumerable:!i,value:a,writable:p===null&&b?b.writable:!p});else if(l||!i&&!p&&!d)e[r]=a;else throw new Xa("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},er=ft,On=function(){return!!er};On.hasArrayLengthDefineBug=function(){if(!er)return null;try{return er([],"length",{value:1}).length!==1}catch{return!0}};var Pn=On,Qa=fr,Nr=An,Ka=Pn(),Fr=Me,Br=Ge,ei=Qa("%Math.floor%"),ti=function(e,r){if(typeof e!="function")throw new Br("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ei(r)!==r)throw new Br("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],i=!0,p=!0;if("length"in e&&Fr){var d=Fr(e,"length");d&&!d.configurable&&(i=!1),d&&!d.writable&&(p=!1)}return(i||p||!a)&&(Ka?Nr(e,"length",r,!0,!0):Nr(e,"length",r)),e},ri=He(),ni=sr(),oi=ln,ai=function(){return oi(ri,ni,arguments)};(function(t){var e=ti,r=ft,a=ur,i=ai;t.exports=function(d){var l=a(arguments),b=d.length-(arguments.length-1);return e(l,1+(b>0?b:0),!0)},r?r(t.exports,"apply",{value:i}):t.exports.apply=i})(En);var pt=En.exports,ot=Wa,ii=Za,Dr=pt,lr=qe,Qe=Me,ci=lr("Object.prototype.toString"),jn=ut(),Mr=typeof globalThis>"u"?an:globalThis,tr=ii(),pr=lr("String.prototype.slice"),Dt=Object.getPrototypeOf,si=lr("Array.prototype.indexOf",!0)||function(e,r){for(var a=0;a<e.length;a+=1)if(e[a]===r)return a;return-1},at={__proto__:null};jn&&Qe&&Dt?ot(tr,function(t){var e=new Mr[t];if(Symbol.toStringTag in e){var r=Dt(e),a=Qe(r,Symbol.toStringTag);if(!a){var i=Dt(r);a=Qe(i,Symbol.toStringTag)}at["$"+t]=Dr(a.get)}}):ot(tr,function(t){var e=new Mr[t],r=e.slice||e.set;r&&(at["$"+t]=Dr(r))});var ui=function(e){var r=!1;return ot(at,function(a,i){if(!r)try{"$"+a(e)===i&&(r=pr(i,1))}catch{}}),r},fi=function(e){var r=!1;return ot(at,function(a,i){if(!r)try{a(e),r=pr(i,1)}catch{}}),r},Rn=function(e){if(!e||typeof e!="object")return!1;if(!jn){var r=pr(ci(e),8,-1);return si(tr,r)>-1?r:r!=="Object"?!1:fi(e)}return Qe?ui(e):null},li=Rn,pi=function(e){return!!li(e)};(function(t){var e=la,r=Ia,a=Rn,i=pi;function p(h){return h.call.bind(h)}var d=typeof BigInt<"u",l=typeof Symbol<"u",b=p(Object.prototype.toString),v=p(Number.prototype.valueOf),S=p(String.prototype.valueOf),j=p(Boolean.prototype.valueOf);if(d)var _=p(BigInt.prototype.valueOf);if(l)var R=p(Symbol.prototype.valueOf);function G(h,Ae){if(typeof h!="object")return!1;try{return Ae(h),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function V(h){return typeof Promise<"u"&&h instanceof Promise||h!==null&&typeof h=="object"&&typeof h.then=="function"&&typeof h.catch=="function"}t.isPromise=V;function K(h){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(h):i(h)||c(h)}t.isArrayBufferView=K;function U(h){return a(h)==="Uint8Array"}t.isUint8Array=U;function E(h){return a(h)==="Uint8ClampedArray"}t.isUint8ClampedArray=E;function O(h){return a(h)==="Uint16Array"}t.isUint16Array=O;function $(h){return a(h)==="Uint32Array"}t.isUint32Array=$;function C(h){return a(h)==="Int8Array"}t.isInt8Array=C;function L(h){return a(h)==="Int16Array"}t.isInt16Array=L;function D(h){return a(h)==="Int32Array"}t.isInt32Array=D;function Y(h){return a(h)==="Float32Array"}t.isFloat32Array=Y;function q(h){return a(h)==="Float64Array"}t.isFloat64Array=q;function Q(h){return a(h)==="BigInt64Array"}t.isBigInt64Array=Q;function te(h){return a(h)==="BigUint64Array"}t.isBigUint64Array=te;function H(h){return b(h)==="[object Map]"}H.working=typeof Map<"u"&&H(new Map);function ee(h){return typeof Map>"u"?!1:H.working?H(h):h instanceof Map}t.isMap=ee;function fe(h){return b(h)==="[object Set]"}fe.working=typeof Set<"u"&&fe(new Set);function pe(h){return typeof Set>"u"?!1:fe.working?fe(h):h instanceof Set}t.isSet=pe;function ne(h){return b(h)==="[object WeakMap]"}ne.working=typeof WeakMap<"u"&&ne(new WeakMap);function de(h){return typeof WeakMap>"u"?!1:ne.working?ne(h):h instanceof WeakMap}t.isWeakMap=de;function ie(h){return b(h)==="[object WeakSet]"}ie.working=typeof WeakSet<"u"&&ie(new WeakSet);function A(h){return ie(h)}t.isWeakSet=A;function w(h){return b(h)==="[object ArrayBuffer]"}w.working=typeof ArrayBuffer<"u"&&w(new ArrayBuffer);function N(h){return typeof ArrayBuffer>"u"?!1:w.working?w(h):h instanceof ArrayBuffer}t.isArrayBuffer=N;function T(h){return b(h)==="[object DataView]"}T.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&T(new DataView(new ArrayBuffer(1),0,1));function c(h){return typeof DataView>"u"?!1:T.working?T(h):h instanceof DataView}t.isDataView=c;var n=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function o(h){return b(h)==="[object SharedArrayBuffer]"}function s(h){return typeof n>"u"?!1:(typeof o.working>"u"&&(o.working=o(new n)),o.working?o(h):h instanceof n)}t.isSharedArrayBuffer=s;function m(h){return b(h)==="[object AsyncFunction]"}t.isAsyncFunction=m;function y(h){return b(h)==="[object Map Iterator]"}t.isMapIterator=y;function g(h){return b(h)==="[object Set Iterator]"}t.isSetIterator=g;function P(h){return b(h)==="[object Generator]"}t.isGeneratorObject=P;function F(h){return b(h)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=F;function x(h){return G(h,v)}t.isNumberObject=x;function J(h){return G(h,S)}t.isStringObject=J;function re(h){return G(h,j)}t.isBooleanObject=re;function ue(h){return d&&G(h,_)}t.isBigIntObject=ue;function ge(h){return l&&G(h,R)}t.isSymbolObject=ge;function he(h){return x(h)||J(h)||re(h)||ue(h)||ge(h)}t.isBoxedPrimitive=he;function ce(h){return typeof Uint8Array<"u"&&(N(h)||s(h))}t.isAnyArrayBuffer=ce,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(h){Object.defineProperty(t,h,{enumerable:!1,value:function(){throw new Error(h+" is not supported in userland")}})})})(cn);var yi=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},rr={exports:{}};typeof Object.create=="function"?rr.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:rr.exports=function(e,r){if(r){e.super_=r;var a=function(){};a.prototype=r.prototype,e.prototype=new a,e.prototype.constructor=e}};var di=rr.exports;(function(t){var e={},r=Object.getOwnPropertyDescriptors||function(n){for(var o=Object.keys(n),s={},m=0;m<o.length;m++)s[o[m]]=Object.getOwnPropertyDescriptor(n,o[m]);return s},a=/%[sdj%]/g;t.format=function(c){if(!L(c)){for(var n=[],o=0;o<arguments.length;o++)n.push(l(arguments[o]));return n.join(" ")}for(var o=1,s=arguments,m=s.length,y=String(c).replace(a,function(P){if(P==="%%")return"%";if(o>=m)return P;switch(P){case"%s":return String(s[o++]);case"%d":return Number(s[o++]);case"%j":try{return JSON.stringify(s[o++])}catch{return"[Circular]"}default:return P}}),g=s[o];o<m;g=s[++o])O(g)||!Q(g)?y+=" "+g:y+=" "+l(g);return y},t.deprecate=function(c,n){if(typeof process<"u"&&process.noDeprecation===!0)return c;if(typeof process>"u")return function(){return t.deprecate(c,n).apply(this,arguments)};var o=!1;function s(){if(!o){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),o=!0}return c.apply(this,arguments)}return s};var i={},p=/^$/;if(e.NODE_DEBUG){var d=e.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),p=new RegExp("^"+d+"$","i")}t.debuglog=function(c){if(c=c.toUpperCase(),!i[c])if(p.test(c)){var n=process.pid;i[c]=function(){var o=t.format.apply(t,arguments);console.error("%s %d: %s",c,n,o)}}else i[c]=function(){};return i[c]};function l(c,n){var o={seen:[],stylize:v};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),E(n)?o.showHidden=n:n&&t._extend(o,n),Y(o.showHidden)&&(o.showHidden=!1),Y(o.depth)&&(o.depth=2),Y(o.colors)&&(o.colors=!1),Y(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=b),j(o,c,o.depth)}t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function b(c,n){var o=l.styles[n];return o?"\x1B["+l.colors[o][0]+"m"+c+"\x1B["+l.colors[o][1]+"m":c}function v(c,n){return c}function S(c){var n={};return c.forEach(function(o,s){n[o]=!0}),n}function j(c,n,o){if(c.customInspect&&n&&ee(n.inspect)&&n.inspect!==t.inspect&&!(n.constructor&&n.constructor.prototype===n)){var s=n.inspect(o,c);return L(s)||(s=j(c,s,o)),s}var m=_(c,n);if(m)return m;var y=Object.keys(n),g=S(y);if(c.showHidden&&(y=Object.getOwnPropertyNames(n)),H(n)&&(y.indexOf("message")>=0||y.indexOf("description")>=0))return R(n);if(y.length===0){if(ee(n)){var P=n.name?": "+n.name:"";return c.stylize("[Function"+P+"]","special")}if(q(n))return c.stylize(RegExp.prototype.toString.call(n),"regexp");if(te(n))return c.stylize(Date.prototype.toString.call(n),"date");if(H(n))return R(n)}var F="",x=!1,J=["{","}"];if(U(n)&&(x=!0,J=["[","]"]),ee(n)){var re=n.name?": "+n.name:"";F=" [Function"+re+"]"}if(q(n)&&(F=" "+RegExp.prototype.toString.call(n)),te(n)&&(F=" "+Date.prototype.toUTCString.call(n)),H(n)&&(F=" "+R(n)),y.length===0&&(!x||n.length==0))return J[0]+F+J[1];if(o<0)return q(n)?c.stylize(RegExp.prototype.toString.call(n),"regexp"):c.stylize("[Object]","special");c.seen.push(n);var ue;return x?ue=G(c,n,o,g,y):ue=y.map(function(ge){return V(c,n,o,g,ge,x)}),c.seen.pop(),K(ue,F,J)}function _(c,n){if(Y(n))return c.stylize("undefined","undefined");if(L(n)){var o="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return c.stylize(o,"string")}if(C(n))return c.stylize(""+n,"number");if(E(n))return c.stylize(""+n,"boolean");if(O(n))return c.stylize("null","null")}function R(c){return"["+Error.prototype.toString.call(c)+"]"}function G(c,n,o,s,m){for(var y=[],g=0,P=n.length;g<P;++g)A(n,String(g))?y.push(V(c,n,o,s,String(g),!0)):y.push("");return m.forEach(function(F){F.match(/^\d+$/)||y.push(V(c,n,o,s,F,!0))}),y}function V(c,n,o,s,m,y){var g,P,F;if(F=Object.getOwnPropertyDescriptor(n,m)||{value:n[m]},F.get?F.set?P=c.stylize("[Getter/Setter]","special"):P=c.stylize("[Getter]","special"):F.set&&(P=c.stylize("[Setter]","special")),A(s,m)||(g="["+m+"]"),P||(c.seen.indexOf(F.value)<0?(O(o)?P=j(c,F.value,null):P=j(c,F.value,o-1),P.indexOf(`
`)>-1&&(y?P=P.split(`
`).map(function(x){return"  "+x}).join(`
`).slice(2):P=`
`+P.split(`
`).map(function(x){return"   "+x}).join(`
`))):P=c.stylize("[Circular]","special")),Y(g)){if(y&&m.match(/^\d+$/))return P;g=JSON.stringify(""+m),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.slice(1,-1),g=c.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=c.stylize(g,"string"))}return g+": "+P}function K(c,n,o){var s=c.reduce(function(m,y){return y.indexOf(`
`)>=0,m+y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return s>60?o[0]+(n===""?"":n+`
 `)+" "+c.join(`,
  `)+" "+o[1]:o[0]+n+" "+c.join(", ")+" "+o[1]}t.types=cn;function U(c){return Array.isArray(c)}t.isArray=U;function E(c){return typeof c=="boolean"}t.isBoolean=E;function O(c){return c===null}t.isNull=O;function $(c){return c==null}t.isNullOrUndefined=$;function C(c){return typeof c=="number"}t.isNumber=C;function L(c){return typeof c=="string"}t.isString=L;function D(c){return typeof c=="symbol"}t.isSymbol=D;function Y(c){return c===void 0}t.isUndefined=Y;function q(c){return Q(c)&&pe(c)==="[object RegExp]"}t.isRegExp=q,t.types.isRegExp=q;function Q(c){return typeof c=="object"&&c!==null}t.isObject=Q;function te(c){return Q(c)&&pe(c)==="[object Date]"}t.isDate=te,t.types.isDate=te;function H(c){return Q(c)&&(pe(c)==="[object Error]"||c instanceof Error)}t.isError=H,t.types.isNativeError=H;function ee(c){return typeof c=="function"}t.isFunction=ee;function fe(c){return c===null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||typeof c=="symbol"||typeof c>"u"}t.isPrimitive=fe,t.isBuffer=yi;function pe(c){return Object.prototype.toString.call(c)}function ne(c){return c<10?"0"+c.toString(10):c.toString(10)}var de=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var c=new Date,n=[ne(c.getHours()),ne(c.getMinutes()),ne(c.getSeconds())].join(":");return[c.getDate(),de[c.getMonth()],n].join(" ")}t.log=function(){console.log("%s - %s",ie(),t.format.apply(t,arguments))},t.inherits=di,t._extend=function(c,n){if(!n||!Q(n))return c;for(var o=Object.keys(n),s=o.length;s--;)c[o[s]]=n[o[s]];return c};function A(c,n){return Object.prototype.hasOwnProperty.call(c,n)}var w=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(n){if(typeof n!="function")throw new TypeError('The "original" argument must be of type Function');if(w&&n[w]){var o=n[w];if(typeof o!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(o,w,{value:o,enumerable:!1,writable:!1,configurable:!0}),o}function o(){for(var s,m,y=new Promise(function(F,x){s=F,m=x}),g=[],P=0;P<arguments.length;P++)g.push(arguments[P]);g.push(function(F,x){F?m(F):s(x)});try{n.apply(this,g)}catch(F){m(F)}return y}return Object.setPrototypeOf(o,Object.getPrototypeOf(n)),w&&Object.defineProperty(o,w,{value:o,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(o,r(n))},t.promisify.custom=w;function N(c,n){if(!c){var o=new Error("Promise was rejected with a falsy value");o.reason=c,c=o}return n(c)}function T(c){if(typeof c!="function")throw new TypeError('The "original" argument must be of type Function');function n(){for(var o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);var m=o.pop();if(typeof m!="function")throw new TypeError("The last argument must be of type Function");var y=this,g=function(){return m.apply(y,arguments)};c.apply(this,o).then(function(P){process.nextTick(g.bind(null,null,P))},function(P){process.nextTick(N.bind(null,P,g))})}return Object.setPrototypeOf(n,Object.getPrototypeOf(c)),Object.defineProperties(n,r(c)),n}t.callbackify=T})(Be);var qr;function In(){if(qr)return vt;qr=1;function t(E){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},t(E)}function e(E,O,$){return Object.defineProperty(E,"prototype",{writable:!1}),E}function r(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function a(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),O&&i(E,O)}function i(E,O){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,L){return C.__proto__=L,C},i(E,O)}function p(E){var O=b();return function(){var C=v(E),L;if(O){var D=v(this).constructor;L=Reflect.construct(C,arguments,D)}else L=C.apply(this,arguments);return d(this,L)}}function d(E,O){if(O&&(t(O)==="object"||typeof O=="function"))return O;if(O!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(E)}function l(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(E){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},v(E)}var S={},j,_;function R(E,O,$){$||($=Error);function C(D,Y,q){return typeof O=="string"?O:O(D,Y,q)}var L=function(D){a(q,D);var Y=p(q);function q(Q,te,H){var ee;return r(this,q),ee=Y.call(this,C(Q,te,H)),ee.code=E,ee}return e(q)}($);S[E]=L}function G(E,O){if(Array.isArray(E)){var $=E.length;return E=E.map(function(C){return String(C)}),$>2?"one of ".concat(O," ").concat(E.slice(0,$-1).join(", "),", or ")+E[$-1]:$===2?"one of ".concat(O," ").concat(E[0]," or ").concat(E[1]):"of ".concat(O," ").concat(E[0])}else return"of ".concat(O," ").concat(String(E))}function V(E,O,$){return E.substr(0,O.length)===O}function K(E,O,$){return($===void 0||$>E.length)&&($=E.length),E.substring($-O.length,$)===O}function U(E,O,$){return typeof $!="number"&&($=0),$+O.length>E.length?!1:E.indexOf(O,$)!==-1}return R("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),R("ERR_INVALID_ARG_TYPE",function(E,O,$){j===void 0&&(j=nr()),j(typeof E=="string","'name' must be a string");var C;typeof O=="string"&&V(O,"not ")?(C="must not be",O=O.replace(/^not /,"")):C="must be";var L;if(K(E," argument"))L="The ".concat(E," ").concat(C," ").concat(G(O,"type"));else{var D=U(E,".")?"property":"argument";L='The "'.concat(E,'" ').concat(D," ").concat(C," ").concat(G(O,"type"))}return L+=". Received type ".concat(t($)),L},TypeError),R("ERR_INVALID_ARG_VALUE",function(E,O){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";_===void 0&&(_=Be);var C=_.inspect(O);return C.length>128&&(C="".concat(C.slice(0,128),"...")),"The argument '".concat(E,"' ").concat($,". Received ").concat(C)},TypeError),R("ERR_INVALID_RETURN_VALUE",function(E,O,$){var C;return $&&$.constructor&&$.constructor.name?C="instance of ".concat($.constructor.name):C="type ".concat(t($)),"Expected ".concat(E,' to be returned from the "').concat(O,'"')+" function but got ".concat(C,".")},TypeError),R("ERR_MISSING_ARGS",function(){for(var E=arguments.length,O=new Array(E),$=0;$<E;$++)O[$]=arguments[$];j===void 0&&(j=nr()),j(O.length>0,"At least one arg needs to be specified");var C="The ",L=O.length;switch(O=O.map(function(D){return'"'.concat(D,'"')}),L){case 1:C+="".concat(O[0]," argument");break;case 2:C+="".concat(O[0]," and ").concat(O[1]," arguments");break;default:C+=O.slice(0,L-1).join(", "),C+=", and ".concat(O[L-1]," arguments");break}return"".concat(C," must be specified")},TypeError),vt.codes=S,vt}var Mt,kr;function gi(){if(kr)return Mt;kr=1;function t(A,w){var N=Object.keys(A);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(A);w&&(T=T.filter(function(c){return Object.getOwnPropertyDescriptor(A,c).enumerable})),N.push.apply(N,T)}return N}function e(A){for(var w=1;w<arguments.length;w++){var N=arguments[w]!=null?arguments[w]:{};w%2?t(Object(N),!0).forEach(function(T){r(A,T,N[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(N)):t(Object(N)).forEach(function(T){Object.defineProperty(A,T,Object.getOwnPropertyDescriptor(N,T))})}return A}function r(A,w,N){return w=d(w),w in A?Object.defineProperty(A,w,{value:N,enumerable:!0,configurable:!0,writable:!0}):A[w]=N,A}function a(A,w){if(!(A instanceof w))throw new TypeError("Cannot call a class as a function")}function i(A,w){for(var N=0;N<w.length;N++){var T=w[N];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,d(T.key),T)}}function p(A,w,N){return i(A.prototype,w),Object.defineProperty(A,"prototype",{writable:!1}),A}function d(A){var w=l(A,"string");return E(w)==="symbol"?w:String(w)}function l(A,w){if(E(A)!=="object"||A===null)return A;var N=A[Symbol.toPrimitive];if(N!==void 0){var T=N.call(A,w);if(E(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}function b(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(w&&w.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),w&&K(A,w)}function v(A){var w=G();return function(){var T=U(A),c;if(w){var n=U(this).constructor;c=Reflect.construct(T,arguments,n)}else c=T.apply(this,arguments);return S(this,c)}}function S(A,w){if(w&&(E(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(A)}function j(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function _(A){var w=typeof Map=="function"?new Map:void 0;return _=function(T){if(T===null||!V(T))return T;if(typeof T!="function")throw new TypeError("Super expression must either be null or a function");if(typeof w<"u"){if(w.has(T))return w.get(T);w.set(T,c)}function c(){return R(T,arguments,U(this).constructor)}return c.prototype=Object.create(T.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),K(c,T)},_(A)}function R(A,w,N){return G()?R=Reflect.construct.bind():R=function(c,n,o){var s=[null];s.push.apply(s,n);var m=Function.bind.apply(c,s),y=new m;return o&&K(y,o.prototype),y},R.apply(null,arguments)}function G(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V(A){return Function.toString.call(A).indexOf("[native code]")!==-1}function K(A,w){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,c){return T.__proto__=c,T},K(A,w)}function U(A){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},U(A)}function E(A){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},E(A)}var O=Be,$=O.inspect,C=In(),L=C.codes.ERR_INVALID_ARG_TYPE;function D(A,w,N){return(N===void 0||N>A.length)&&(N=A.length),A.substring(N-w.length,N)===w}function Y(A,w){if(w=Math.floor(w),A.length==0||w==0)return"";var N=A.length*w;for(w=Math.floor(Math.log(w)/Math.log(2));w;)A+=A,w--;return A+=A.substring(0,N-A.length),A}var q="",Q="",te="",H="",ee={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},fe=10;function pe(A){var w=Object.keys(A),N=Object.create(Object.getPrototypeOf(A));return w.forEach(function(T){N[T]=A[T]}),Object.defineProperty(N,"message",{value:A.message}),N}function ne(A){return $(A,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function de(A,w,N){var T="",c="",n=0,o="",s=!1,m=ne(A),y=m.split(`
`),g=ne(w).split(`
`),P=0,F="";if(N==="strictEqual"&&E(A)==="object"&&E(w)==="object"&&A!==null&&w!==null&&(N="strictEqualObject"),y.length===1&&g.length===1&&y[0]!==g[0]){var x=y[0].length+g[0].length;if(x<=fe){if((E(A)!=="object"||A===null)&&(E(w)!=="object"||w===null)&&(A!==0||w!==0))return"".concat(ee[N],`

`)+"".concat(y[0]," !== ").concat(g[0],`
`)}else if(N!=="strictEqualObject"){var J=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(x<J){for(;y[0][P]===g[0][P];)P++;P>2&&(F=`
  `.concat(Y(" ",P),"^"),P=0)}}}for(var re=y[y.length-1],ue=g[g.length-1];re===ue&&(P++<2?o=`
  `.concat(re).concat(o):T=re,y.pop(),g.pop(),!(y.length===0||g.length===0));)re=y[y.length-1],ue=g[g.length-1];var ge=Math.max(y.length,g.length);if(ge===0){var he=m.split(`
`);if(he.length>30)for(he[26]="".concat(q,"...").concat(H);he.length>27;)he.pop();return"".concat(ee.notIdentical,`

`).concat(he.join(`
`),`
`)}P>3&&(o=`
`.concat(q,"...").concat(H).concat(o),s=!0),T!==""&&(o=`
  `.concat(T).concat(o),T="");var ce=0,h=ee[N]+`
`.concat(Q,"+ actual").concat(H," ").concat(te,"- expected").concat(H),Ae=" ".concat(q,"...").concat(H," Lines skipped");for(P=0;P<ge;P++){var le=P-n;if(y.length<P+1)le>1&&P>2&&(le>4?(c+=`
`.concat(q,"...").concat(H),s=!0):le>3&&(c+=`
  `.concat(g[P-2]),ce++),c+=`
  `.concat(g[P-1]),ce++),n=P,T+=`
`.concat(te,"-").concat(H," ").concat(g[P]),ce++;else if(g.length<P+1)le>1&&P>2&&(le>4?(c+=`
`.concat(q,"...").concat(H),s=!0):le>3&&(c+=`
  `.concat(y[P-2]),ce++),c+=`
  `.concat(y[P-1]),ce++),n=P,c+=`
`.concat(Q,"+").concat(H," ").concat(y[P]),ce++;else{var _e=g[P],me=y[P],u=me!==_e&&(!D(me,",")||me.slice(0,-1)!==_e);u&&D(_e,",")&&_e.slice(0,-1)===me&&(u=!1,me+=","),u?(le>1&&P>2&&(le>4?(c+=`
`.concat(q,"...").concat(H),s=!0):le>3&&(c+=`
  `.concat(y[P-2]),ce++),c+=`
  `.concat(y[P-1]),ce++),n=P,c+=`
`.concat(Q,"+").concat(H," ").concat(me),T+=`
`.concat(te,"-").concat(H," ").concat(_e),ce+=2):(c+=T,T="",(le===1||P===0)&&(c+=`
  `.concat(me),ce++))}if(ce>20&&P<ge-2)return"".concat(h).concat(Ae,`
`).concat(c,`
`).concat(q,"...").concat(H).concat(T,`
`)+"".concat(q,"...").concat(H)}return"".concat(h).concat(s?Ae:"",`
`).concat(c).concat(T).concat(o).concat(F)}var ie=function(A,w){b(T,A);var N=v(T);function T(c){var n;if(a(this,T),E(c)!=="object"||c===null)throw new L("options","Object",c);var o=c.message,s=c.operator,m=c.stackStartFn,y=c.actual,g=c.expected,P=Error.stackTraceLimit;if(Error.stackTraceLimit=0,o!=null)n=N.call(this,String(o));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(q="\x1B[34m",Q="\x1B[32m",H="\x1B[39m",te="\x1B[31m"):(q="",Q="",H="",te="")),E(y)==="object"&&y!==null&&E(g)==="object"&&g!==null&&"stack"in y&&y instanceof Error&&"stack"in g&&g instanceof Error&&(y=pe(y),g=pe(g)),s==="deepStrictEqual"||s==="strictEqual")n=N.call(this,de(y,g,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var F=ee[s],x=ne(y).split(`
`);if(s==="notStrictEqual"&&E(y)==="object"&&y!==null&&(F=ee.notStrictEqualObject),x.length>30)for(x[26]="".concat(q,"...").concat(H);x.length>27;)x.pop();x.length===1?n=N.call(this,"".concat(F," ").concat(x[0])):n=N.call(this,"".concat(F,`

`).concat(x.join(`
`),`
`))}else{var J=ne(y),re="",ue=ee[s];s==="notDeepEqual"||s==="notEqual"?(J="".concat(ee[s],`

`).concat(J),J.length>1024&&(J="".concat(J.slice(0,1021),"..."))):(re="".concat(ne(g)),J.length>512&&(J="".concat(J.slice(0,509),"...")),re.length>512&&(re="".concat(re.slice(0,509),"...")),s==="deepEqual"||s==="equal"?J="".concat(ue,`

`).concat(J,`

should equal

`):re=" ".concat(s," ").concat(re)),n=N.call(this,"".concat(J).concat(re))}return Error.stackTraceLimit=P,n.generatedMessage=!o,Object.defineProperty(j(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=y,n.expected=g,n.operator=s,Error.captureStackTrace&&Error.captureStackTrace(j(n),m),n.stack,n.name="AssertionError",S(n)}return p(T,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:w,value:function(n,o){return $(this,e(e({},o),{},{customInspect:!1,depth:0}))}}]),T}(_(Error),$.custom);return Mt=ie,Mt}var Ur=Object.prototype.toString,Tn=function(e){var r=Ur.call(e),a=r==="[object Arguments]";return a||(a=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ur.call(e.callee)==="[object Function]"),a},qt,xr;function hi(){if(xr)return qt;xr=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=Tn,i=Object.prototype.propertyIsEnumerable,p=!i.call({toString:null},"toString"),d=i.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=function(_){var R=_.constructor;return R&&R.prototype===_},v={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},S=function(){if(typeof window>"u")return!1;for(var _ in window)try{if(!v["$"+_]&&e.call(window,_)&&window[_]!==null&&typeof window[_]=="object")try{b(window[_])}catch{return!0}}catch{return!0}return!1}(),j=function(_){if(typeof window>"u"||!S)return b(_);try{return b(_)}catch{return!1}};t=function(R){var G=R!==null&&typeof R=="object",V=r.call(R)==="[object Function]",K=a(R),U=G&&r.call(R)==="[object String]",E=[];if(!G&&!V&&!K)throw new TypeError("Object.keys called on a non-object");var O=d&&V;if(U&&R.length>0&&!e.call(R,0))for(var $=0;$<R.length;++$)E.push(String($));if(K&&R.length>0)for(var C=0;C<R.length;++C)E.push(String(C));else for(var L in R)!(O&&L==="prototype")&&e.call(R,L)&&E.push(String(L));if(p)for(var D=j(R),Y=0;Y<l.length;++Y)!(D&&l[Y]==="constructor")&&e.call(R,l[Y])&&E.push(l[Y]);return E}}return qt=t,qt}var mi=Array.prototype.slice,vi=Tn,Lr=Object.keys,Ke=Lr?function(e){return Lr(e)}:hi(),Gr=Object.keys;Ke.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(a){return vi(a)?Gr(mi.call(a)):Gr(a)})}else Object.keys=Ke;return Object.keys||Ke};var $n=Ke,bi=$n,Cn=ar(),Nn=qe,et=ir,_i=Nn("Array.prototype.push"),Hr=Nn("Object.prototype.propertyIsEnumerable"),wi=Cn?et.getOwnPropertySymbols:null,Si=function(e,r){if(e==null)throw new TypeError("target must be an object");var a=et(e);if(arguments.length===1)return a;for(var i=1;i<arguments.length;++i){var p=et(arguments[i]),d=bi(p),l=Cn&&(et.getOwnPropertySymbols||wi);if(l)for(var b=l(p),v=0;v<b.length;++v){var S=b[v];Hr(p,S)&&_i(d,S)}for(var j=0;j<d.length;++j){var _=d[j];if(Hr(p,_)){var R=p[_];a[_]=R}}}return a},kt=Si,Ei=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},a=0;a<e.length;++a)r[e[a]]=e[a];var i=Object.assign({},r),p="";for(var d in i)p+=d;return t!==p},Ai=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Oi=function(){return!Object.assign||Ei()||Ai()?kt:Object.assign},zr=function(t){return t!==t},Fn=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||zr(e)&&zr(r))},Pi=Fn,yr=function(){return typeof Object.is=="function"?Object.is:Pi},Bn=fr,Dn=pt,ji=Dn(Bn("String.prototype.indexOf")),Ri=function(e,r){var a=Bn(e,!!r);return typeof a=="function"&&ji(e,".prototype.")>-1?Dn(a):a},Ut,Vr;function yt(){if(Vr)return Ut;Vr=1;var t=$n,e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,a=Array.prototype.concat,i=An,p=function(v){return typeof v=="function"&&r.call(v)==="[object Function]"},d=Pn(),l=function(v,S,j,_){if(S in v){if(_===!0){if(v[S]===j)return}else if(!p(_)||!_())return}d?i(v,S,j,!0):i(v,S,j)},b=function(v,S){var j=arguments.length>2?arguments[2]:{},_=t(S);e&&(_=a.call(_,Object.getOwnPropertySymbols(S)));for(var R=0;R<_.length;R+=1)l(v,_[R],S[_[R]],j[_[R]])};return b.supportsDescriptors=!!d,Ut=b,Ut}var xt,Wr;function Ii(){if(Wr)return xt;Wr=1;var t=yr,e=yt();return xt=function(){var a=t();return e(Object,{is:a},{is:function(){return Object.is!==a}}),a},xt}var Lt,Yr;function Ti(){if(Yr)return Lt;Yr=1;var t=yt(),e=pt,r=Fn,a=yr,i=Ii(),p=e(a(),Object);return t(p,{getPolyfill:a,implementation:r,shim:i}),Lt=p,Lt}var Gt,Jr;function Mn(){return Jr||(Jr=1,Gt=function(e){return e!==e}),Gt}var Ht,Zr;function qn(){if(Zr)return Ht;Zr=1;var t=Mn();return Ht=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:t},Ht}var zt,Xr;function $i(){if(Xr)return zt;Xr=1;var t=yt(),e=qn();return zt=function(){var a=e();return t(Number,{isNaN:a},{isNaN:function(){return Number.isNaN!==a}}),a},zt}var Vt,Qr;function Ci(){if(Qr)return Vt;Qr=1;var t=pt,e=yt(),r=Mn(),a=qn(),i=$i(),p=t(a(),Number);return e(p,{getPolyfill:a,implementation:r,shim:i}),Vt=p,Vt}var Wt,Kr;function Ni(){if(Kr)return Wt;Kr=1;function t(u,f){return p(u)||i(u,f)||r(u,f)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(u,f){if(u){if(typeof u=="string")return a(u,f);var I=Object.prototype.toString.call(u).slice(8,-1);if(I==="Object"&&u.constructor&&(I=u.constructor.name),I==="Map"||I==="Set")return Array.from(u);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return a(u,f)}}function a(u,f){(f==null||f>u.length)&&(f=u.length);for(var I=0,B=new Array(f);I<f;I++)B[I]=u[I];return B}function i(u,f){var I=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(I!=null){var B,M,z,k,Z=[],X=!0,ae=!1;try{if(z=(I=I.call(u)).next,f!==0)for(;!(X=(B=z.call(I)).done)&&(Z.push(B.value),Z.length!==f);X=!0);}catch(se){ae=!0,M=se}finally{try{if(!X&&I.return!=null&&(k=I.return(),Object(k)!==k))return}finally{if(ae)throw M}}return Z}}function p(u){if(Array.isArray(u))return u}function d(u){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},d(u)}var l=/a/g.flags!==void 0,b=function(f){var I=[];return f.forEach(function(B){return I.push(B)}),I},v=function(f){var I=[];return f.forEach(function(B,M){return I.push([M,B])}),I},S=Object.is?Object.is:Ti(),j=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},_=Number.isNaN?Number.isNaN:Ci();function R(u){return u.call.bind(u)}var G=R(Object.prototype.hasOwnProperty),V=R(Object.prototype.propertyIsEnumerable),K=R(Object.prototype.toString),U=Be.types,E=U.isAnyArrayBuffer,O=U.isArrayBufferView,$=U.isDate,C=U.isMap,L=U.isRegExp,D=U.isSet,Y=U.isNativeError,q=U.isBoxedPrimitive,Q=U.isNumberObject,te=U.isStringObject,H=U.isBooleanObject,ee=U.isBigIntObject,fe=U.isSymbolObject,pe=U.isFloat32Array,ne=U.isFloat64Array;function de(u){if(u.length===0||u.length>10)return!0;for(var f=0;f<u.length;f++){var I=u.charCodeAt(f);if(I<48||I>57)return!0}return u.length===10&&u>=Math.pow(2,32)}function ie(u){return Object.keys(u).filter(de).concat(j(u).filter(Object.prototype.propertyIsEnumerable.bind(u)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function A(u,f){if(u===f)return 0;for(var I=u.length,B=f.length,M=0,z=Math.min(I,B);M<z;++M)if(u[M]!==f[M]){I=u[M],B=f[M];break}return I<B?-1:B<I?1:0}var w=!0,N=!1,T=0,c=1,n=2,o=3;function s(u,f){return l?u.source===f.source&&u.flags===f.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(f)}function m(u,f){if(u.byteLength!==f.byteLength)return!1;for(var I=0;I<u.byteLength;I++)if(u[I]!==f[I])return!1;return!0}function y(u,f){return u.byteLength!==f.byteLength?!1:A(new Uint8Array(u.buffer,u.byteOffset,u.byteLength),new Uint8Array(f.buffer,f.byteOffset,f.byteLength))===0}function g(u,f){return u.byteLength===f.byteLength&&A(new Uint8Array(u),new Uint8Array(f))===0}function P(u,f){return Q(u)?Q(f)&&S(Number.prototype.valueOf.call(u),Number.prototype.valueOf.call(f)):te(u)?te(f)&&String.prototype.valueOf.call(u)===String.prototype.valueOf.call(f):H(u)?H(f)&&Boolean.prototype.valueOf.call(u)===Boolean.prototype.valueOf.call(f):ee(u)?ee(f)&&BigInt.prototype.valueOf.call(u)===BigInt.prototype.valueOf.call(f):fe(f)&&Symbol.prototype.valueOf.call(u)===Symbol.prototype.valueOf.call(f)}function F(u,f,I,B){if(u===f)return u!==0?!0:I?S(u,f):!0;if(I){if(d(u)!=="object")return typeof u=="number"&&_(u)&&_(f);if(d(f)!=="object"||u===null||f===null||Object.getPrototypeOf(u)!==Object.getPrototypeOf(f))return!1}else{if(u===null||d(u)!=="object")return f===null||d(f)!=="object"?u==f:!1;if(f===null||d(f)!=="object")return!1}var M=K(u),z=K(f);if(M!==z)return!1;if(Array.isArray(u)){if(u.length!==f.length)return!1;var k=ie(u),Z=ie(f);return k.length!==Z.length?!1:J(u,f,I,B,c,k)}if(M==="[object Object]"&&(!C(u)&&C(f)||!D(u)&&D(f)))return!1;if($(u)){if(!$(f)||Date.prototype.getTime.call(u)!==Date.prototype.getTime.call(f))return!1}else if(L(u)){if(!L(f)||!s(u,f))return!1}else if(Y(u)||u instanceof Error){if(u.message!==f.message||u.name!==f.name)return!1}else if(O(u)){if(!I&&(pe(u)||ne(u))){if(!m(u,f))return!1}else if(!y(u,f))return!1;var X=ie(u),ae=ie(f);return X.length!==ae.length?!1:J(u,f,I,B,T,X)}else{if(D(u))return!D(f)||u.size!==f.size?!1:J(u,f,I,B,n);if(C(u))return!C(f)||u.size!==f.size?!1:J(u,f,I,B,o);if(E(u)){if(!g(u,f))return!1}else if(q(u)&&!P(u,f))return!1}return J(u,f,I,B,T)}function x(u,f){return f.filter(function(I){return V(u,I)})}function J(u,f,I,B,M,z){if(arguments.length===5){z=Object.keys(u);var k=Object.keys(f);if(z.length!==k.length)return!1}for(var Z=0;Z<z.length;Z++)if(!G(f,z[Z]))return!1;if(I&&arguments.length===5){var X=j(u);if(X.length!==0){var ae=0;for(Z=0;Z<X.length;Z++){var se=X[Z];if(V(u,se)){if(!V(f,se))return!1;z.push(se),ae++}else if(V(f,se))return!1}var ke=j(f);if(X.length!==ke.length&&x(f,ke).length!==ae)return!1}else{var Oe=j(f);if(Oe.length!==0&&x(f,Oe).length!==0)return!1}}if(z.length===0&&(M===T||M===c&&u.length===0||u.size===0))return!0;if(B===void 0)B={val1:new Map,val2:new Map,position:0};else{var Ue=B.val1.get(u);if(Ue!==void 0){var ve=B.val2.get(f);if(ve!==void 0)return Ue===ve}B.position++}B.val1.set(u,B.position),B.val2.set(f,B.position);var xe=le(u,f,I,z,B,M);return B.val1.delete(u),B.val2.delete(f),xe}function re(u,f,I,B){for(var M=b(u),z=0;z<M.length;z++){var k=M[z];if(F(f,k,I,B))return u.delete(k),!0}return!1}function ue(u){switch(d(u)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":u=+u;case"number":if(_(u))return!1}return!0}function ge(u,f,I){var B=ue(I);return B??(f.has(B)&&!u.has(B))}function he(u,f,I,B,M){var z=ue(I);if(z!=null)return z;var k=f.get(z);return k===void 0&&!f.has(z)||!F(B,k,!1,M)?!1:!u.has(z)&&F(B,k,!1,M)}function ce(u,f,I,B){for(var M=null,z=b(u),k=0;k<z.length;k++){var Z=z[k];if(d(Z)==="object"&&Z!==null)M===null&&(M=new Set),M.add(Z);else if(!f.has(Z)){if(I||!ge(u,f,Z))return!1;M===null&&(M=new Set),M.add(Z)}}if(M!==null){for(var X=b(f),ae=0;ae<X.length;ae++){var se=X[ae];if(d(se)==="object"&&se!==null){if(!re(M,se,I,B))return!1}else if(!I&&!u.has(se)&&!re(M,se,I,B))return!1}return M.size===0}return!0}function h(u,f,I,B,M,z){for(var k=b(u),Z=0;Z<k.length;Z++){var X=k[Z];if(F(I,X,M,z)&&F(B,f.get(X),M,z))return u.delete(X),!0}return!1}function Ae(u,f,I,B){for(var M=null,z=v(u),k=0;k<z.length;k++){var Z=t(z[k],2),X=Z[0],ae=Z[1];if(d(X)==="object"&&X!==null)M===null&&(M=new Set),M.add(X);else{var se=f.get(X);if(se===void 0&&!f.has(X)||!F(ae,se,I,B)){if(I||!he(u,f,X,ae,B))return!1;M===null&&(M=new Set),M.add(X)}}}if(M!==null){for(var ke=v(f),Oe=0;Oe<ke.length;Oe++){var Ue=t(ke[Oe],2),ve=Ue[0],xe=Ue[1];if(d(ve)==="object"&&ve!==null){if(!h(M,u,ve,xe,I,B))return!1}else if(!I&&(!u.has(ve)||!F(u.get(ve),xe,!1,B))&&!h(M,u,ve,xe,!1,B))return!1}return M.size===0}return!0}function le(u,f,I,B,M,z){var k=0;if(z===n){if(!ce(u,f,I,M))return!1}else if(z===o){if(!Ae(u,f,I,M))return!1}else if(z===c)for(;k<u.length;k++)if(G(u,k)){if(!G(f,k)||!F(u[k],f[k],I,M))return!1}else{if(G(f,k))return!1;for(var Z=Object.keys(u);k<Z.length;k++){var X=Z[k];if(!G(f,X)||!F(u[X],f[X],I,M))return!1}return Z.length===Object.keys(f).length}for(k=0;k<B.length;k++){var ae=B[k];if(!F(u[ae],f[ae],I,M))return!1}return!0}function _e(u,f){return F(u,f,N)}function me(u,f){return F(u,f,w)}return Wt={isDeepEqual:_e,isDeepStrictEqual:me},Wt}var en;function nr(){if(en)return mt.exports;en=1;function t(n){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t(n)}function e(n,o,s){return Object.defineProperty(n,"prototype",{writable:!1}),n}function r(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}var a=In(),i=a.codes,p=i.ERR_AMBIGUOUS_ARGUMENT,d=i.ERR_INVALID_ARG_TYPE,l=i.ERR_INVALID_ARG_VALUE,b=i.ERR_INVALID_RETURN_VALUE,v=i.ERR_MISSING_ARGS,S=gi(),j=Be,_=j.inspect,R=Be.types,G=R.isPromise,V=R.isRegExp,K=Oi(),U=yr(),E=Ri("RegExp.prototype.test"),O,$;function C(){var n=Ni();O=n.isDeepEqual,$=n.isDeepStrictEqual}var L=!1,D=mt.exports=H,Y={};function q(n){throw n.message instanceof Error?n.message:new S(n)}function Q(n,o,s,m,y){var g=arguments.length,P;if(g===0)P="Failed";else if(g===1)s=n,n=void 0;else{if(L===!1){L=!0;var F=process.emitWarning?process.emitWarning:console.warn.bind(console);F("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}g===2&&(m="!=")}if(s instanceof Error)throw s;var x={actual:n,expected:o,operator:m===void 0?"fail":m,stackStartFn:y||Q};s!==void 0&&(x.message=s);var J=new S(x);throw P&&(J.message=P,J.generatedMessage=!0),J}D.fail=Q,D.AssertionError=S;function te(n,o,s,m){if(!s){var y=!1;if(o===0)y=!0,m="No value argument passed to `assert.ok()`";else if(m instanceof Error)throw m;var g=new S({actual:s,expected:!0,message:m,operator:"==",stackStartFn:n});throw g.generatedMessage=y,g}}function H(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];te.apply(void 0,[H,o.length].concat(o))}D.ok=H,D.equal=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");o!=s&&q({actual:o,expected:s,message:m,operator:"==",stackStartFn:n})},D.notEqual=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");o==s&&q({actual:o,expected:s,message:m,operator:"!=",stackStartFn:n})},D.deepEqual=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");O===void 0&&C(),O(o,s)||q({actual:o,expected:s,message:m,operator:"deepEqual",stackStartFn:n})},D.notDeepEqual=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");O===void 0&&C(),O(o,s)&&q({actual:o,expected:s,message:m,operator:"notDeepEqual",stackStartFn:n})},D.deepStrictEqual=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");O===void 0&&C(),$(o,s)||q({actual:o,expected:s,message:m,operator:"deepStrictEqual",stackStartFn:n})},D.notDeepStrictEqual=ee;function ee(n,o,s){if(arguments.length<2)throw new v("actual","expected");O===void 0&&C(),$(n,o)&&q({actual:n,expected:o,message:s,operator:"notDeepStrictEqual",stackStartFn:ee})}D.strictEqual=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");U(o,s)||q({actual:o,expected:s,message:m,operator:"strictEqual",stackStartFn:n})},D.notStrictEqual=function n(o,s,m){if(arguments.length<2)throw new v("actual","expected");U(o,s)&&q({actual:o,expected:s,message:m,operator:"notStrictEqual",stackStartFn:n})};var fe=e(function n(o,s,m){var y=this;r(this,n),s.forEach(function(g){g in o&&(m!==void 0&&typeof m[g]=="string"&&V(o[g])&&E(o[g],m[g])?y[g]=m[g]:y[g]=o[g])})});function pe(n,o,s,m,y,g){if(!(s in n)||!$(n[s],o[s])){if(!m){var P=new fe(n,y),F=new fe(o,y,n),x=new S({actual:P,expected:F,operator:"deepStrictEqual",stackStartFn:g});throw x.actual=n,x.expected=o,x.operator=g.name,x}q({actual:n,expected:o,message:m,operator:g.name,stackStartFn:g})}}function ne(n,o,s,m){if(typeof o!="function"){if(V(o))return E(o,n);if(arguments.length===2)throw new d("expected",["Function","RegExp"],o);if(t(n)!=="object"||n===null){var y=new S({actual:n,expected:o,message:s,operator:"deepStrictEqual",stackStartFn:m});throw y.operator=m.name,y}var g=Object.keys(o);if(o instanceof Error)g.push("name","message");else if(g.length===0)throw new l("error",o,"may not be an empty object");return O===void 0&&C(),g.forEach(function(P){typeof n[P]=="string"&&V(o[P])&&E(o[P],n[P])||pe(n,o,P,s,g,m)}),!0}return o.prototype!==void 0&&n instanceof o?!0:Error.isPrototypeOf(o)?!1:o.call({},n)===!0}function de(n){if(typeof n!="function")throw new d("fn","Function",n);try{n()}catch(o){return o}return Y}function ie(n){return G(n)||n!==null&&t(n)==="object"&&typeof n.then=="function"&&typeof n.catch=="function"}function A(n){return Promise.resolve().then(function(){var o;if(typeof n=="function"){if(o=n(),!ie(o))throw new b("instance of Promise","promiseFn",o)}else if(ie(n))o=n;else throw new d("promiseFn",["Function","Promise"],n);return Promise.resolve().then(function(){return o}).then(function(){return Y}).catch(function(s){return s})})}function w(n,o,s,m){if(typeof s=="string"){if(arguments.length===4)throw new d("error",["Object","Error","Function","RegExp"],s);if(t(o)==="object"&&o!==null){if(o.message===s)throw new p("error/message",'The error message "'.concat(o.message,'" is identical to the message.'))}else if(o===s)throw new p("error/message",'The error "'.concat(o,'" is identical to the message.'));m=s,s=void 0}else if(s!=null&&t(s)!=="object"&&typeof s!="function")throw new d("error",["Object","Error","Function","RegExp"],s);if(o===Y){var y="";s&&s.name&&(y+=" (".concat(s.name,")")),y+=m?": ".concat(m):".";var g=n.name==="rejects"?"rejection":"exception";q({actual:void 0,expected:s,operator:n.name,message:"Missing expected ".concat(g).concat(y),stackStartFn:n})}if(s&&!ne(o,s,m,n))throw o}function N(n,o,s,m){if(o!==Y){if(typeof s=="string"&&(m=s,s=void 0),!s||ne(o,s)){var y=m?": ".concat(m):".",g=n.name==="doesNotReject"?"rejection":"exception";q({actual:o,expected:s,operator:n.name,message:"Got unwanted ".concat(g).concat(y,`
`)+'Actual message: "'.concat(o&&o.message,'"'),stackStartFn:n})}throw o}}D.throws=function n(o){for(var s=arguments.length,m=new Array(s>1?s-1:0),y=1;y<s;y++)m[y-1]=arguments[y];w.apply(void 0,[n,de(o)].concat(m))},D.rejects=function n(o){for(var s=arguments.length,m=new Array(s>1?s-1:0),y=1;y<s;y++)m[y-1]=arguments[y];return A(o).then(function(g){return w.apply(void 0,[n,g].concat(m))})},D.doesNotThrow=function n(o){for(var s=arguments.length,m=new Array(s>1?s-1:0),y=1;y<s;y++)m[y-1]=arguments[y];N.apply(void 0,[n,de(o)].concat(m))},D.doesNotReject=function n(o){for(var s=arguments.length,m=new Array(s>1?s-1:0),y=1;y<s;y++)m[y-1]=arguments[y];return A(o).then(function(g){return N.apply(void 0,[n,g].concat(m))})},D.ifError=function n(o){if(o!=null){var s="ifError got unwanted exception: ";t(o)==="object"&&typeof o.message=="string"?o.message.length===0&&o.constructor?s+=o.constructor.name:s+=o.message:s+=_(o);var m=new S({actual:o,expected:null,operator:"ifError",message:s,stackStartFn:n}),y=o.stack;if(typeof y=="string"){var g=y.split(`
`);g.shift();for(var P=m.stack.split(`
`),F=0;F<g.length;F++){var x=P.indexOf(g[F]);if(x!==-1){P=P.slice(0,x);break}}m.stack="".concat(P.join(`
`),`
`).concat(g.join(`
`))}throw m}};function T(n,o,s,m,y){if(!V(o))throw new d("regexp","RegExp",o);var g=y==="match";if(typeof n!="string"||E(o,n)!==g){if(s instanceof Error)throw s;var P=!s;s=s||(typeof n!="string"?'The "string" argument must be of type string. Received type '+"".concat(t(n)," (").concat(_(n),")"):(g?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(_(o),`. Input:

`).concat(_(n),`
`));var F=new S({actual:n,expected:o,message:s,operator:y,stackStartFn:m});throw F.generatedMessage=P,F}}D.match=function n(o,s,m){T(o,s,m,n,"match")},D.doesNotMatch=function n(o,s,m){T(o,s,m,n,"doesNotMatch")};function c(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];te.apply(void 0,[c,o.length].concat(o))}return D.strict=K(c,D,{equal:D.strictEqual,deepEqual:D.deepStrictEqual,notEqual:D.notStrictEqual,notDeepEqual:D.notDeepStrictEqual}),D.strict.strict=D.strict,mt.exports}var Fi=nr();const tn=Kn(Fi);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kn=Symbol("Comlink.proxy"),Bi=Symbol("Comlink.endpoint"),Di=Symbol("Comlink.releaseProxy"),Yt=Symbol("Comlink.finalizer"),tt=Symbol("Comlink.thrown"),Un=t=>typeof t=="object"&&t!==null||typeof t=="function",Mi={canHandle:t=>Un(t)&&t[kn],serialize(t){const{port1:e,port2:r}=new MessageChannel;return Ln(t,e),[r,[r]]},deserialize(t){return t.start(),Hn(t)}},qi={canHandle:t=>Un(t)&&tt in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},xn=new Map([["proxy",Mi],["throw",qi]]);function ki(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function Ln(t,e=globalThis,r=["*"]){e.addEventListener("message",function a(i){if(!i||!i.data)return;if(!ki(r,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:p,type:d,path:l}=Object.assign({path:[]},i.data),b=(i.data.argumentList||[]).map(Se);let v;try{const S=l.slice(0,-1).reduce((_,R)=>_[R],t),j=l.reduce((_,R)=>_[R],t);switch(d){case"GET":v=j;break;case"SET":S[l.slice(-1)[0]]=Se(i.data.value),v=!0;break;case"APPLY":v=j.apply(S,b);break;case"CONSTRUCT":{const _=new j(...b);v=Hi(_)}break;case"ENDPOINT":{const{port1:_,port2:R}=new MessageChannel;Ln(t,R),v=Wn(_,[_])}break;case"RELEASE":v=void 0;break;default:return}}catch(S){v={value:S,[tt]:0}}Promise.resolve(v).catch(S=>({value:S,[tt]:0})).then(S=>{const[j,_]=st(S);e.postMessage(Object.assign(Object.assign({},j),{id:p}),_),d==="RELEASE"&&(e.removeEventListener("message",a),Gn(e),Yt in t&&typeof t[Yt]=="function"&&t[Yt]())}).catch(S=>{const[j,_]=st({value:new TypeError("Unserializable return value"),[tt]:0});e.postMessage(Object.assign(Object.assign({},j),{id:p}),_)})}),e.start&&e.start()}function Ui(t){return t.constructor.name==="MessagePort"}function Gn(t){Ui(t)&&t.close()}function Hn(t,e){const r=new Map;return t.addEventListener("message",function(i){const{data:p}=i;if(!p||!p.id)return;const d=r.get(p.id);if(d)try{d(p)}finally{r.delete(p.id)}}),or(t,r,[],e)}function We(t){if(t)throw new Error("Proxy has been released and is not useable")}function zn(t){return $e(t,new Map,{type:"RELEASE"}).then(()=>{Gn(t)})}const it=new WeakMap,ct="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(it.get(t)||0)-1;it.set(t,e),e===0&&zn(t)});function xi(t,e){const r=(it.get(e)||0)+1;it.set(e,r),ct&&ct.register(t,e,t)}function Li(t){ct&&ct.unregister(t)}function or(t,e,r=[],a=function(){}){let i=!1;const p=new Proxy(a,{get(d,l){if(We(i),l===Di)return()=>{Li(p),zn(t),e.clear(),i=!0};if(l==="then"){if(r.length===0)return{then:()=>p};const b=$e(t,e,{type:"GET",path:r.map(v=>v.toString())}).then(Se);return b.then.bind(b)}return or(t,e,[...r,l])},set(d,l,b){We(i);const[v,S]=st(b);return $e(t,e,{type:"SET",path:[...r,l].map(j=>j.toString()),value:v},S).then(Se)},apply(d,l,b){We(i);const v=r[r.length-1];if(v===Bi)return $e(t,e,{type:"ENDPOINT"}).then(Se);if(v==="bind")return or(t,e,r.slice(0,-1));const[S,j]=rn(b);return $e(t,e,{type:"APPLY",path:r.map(_=>_.toString()),argumentList:S},j).then(Se)},construct(d,l){We(i);const[b,v]=rn(l);return $e(t,e,{type:"CONSTRUCT",path:r.map(S=>S.toString()),argumentList:b},v).then(Se)}});return xi(p,t),p}function Gi(t){return Array.prototype.concat.apply([],t)}function rn(t){const e=t.map(st);return[e.map(r=>r[0]),Gi(e.map(r=>r[1]))]}const Vn=new WeakMap;function Wn(t,e){return Vn.set(t,e),t}function Hi(t){return Object.assign(t,{[kn]:!0})}function st(t){for(const[e,r]of xn)if(r.canHandle(t)){const[a,i]=r.serialize(t);return[{type:"HANDLER",name:e,value:a},i]}return[{type:"RAW",value:t},Vn.get(t)||[]]}function Se(t){switch(t.type){case"HANDLER":return xn.get(t.name).deserialize(t.value);case"RAW":return t.value}}function $e(t,e,r,a){return new Promise(i=>{const p=zi();e.set(p,i),t.start&&t.start(),t.postMessage(Object.assign({id:p},r),a)})}function zi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function dt(t,e,r,a){function i(p){return p instanceof r?p:new r(function(d){d(p)})}return new(r||(r=Promise))(function(p,d){function l(S){try{v(a.next(S))}catch(j){d(j)}}function b(S){try{v(a.throw(S))}catch(j){d(j)}}function v(S){S.done?p(S.value):i(S.value).then(l,b)}v((a=a.apply(t,[])).next())})}function Vi(t){return dt(this,void 0,void 0,function*(){return new Promise(function(e,r){const a=document.createElement("img");a.crossOrigin="anonymous",a.src=t,a.onload=function(i){const p=i.target;e(p)},a.onabort=r,a.onerror=r})})}function Wi(t){return dt(this,void 0,void 0,function*(){return new Promise(function(e,r){const a=document.createElement("canvas"),i=a.getContext("2d");if(i){const{width:p,height:d}=t;a.width=p,a.height=d,i.drawImage(t,0,0,p,d),a.toBlob(function(l){l?e(l):r("Cannot get blob from image element")},"image/png",1)}})})}function Yi(t){return dt(this,void 0,void 0,function*(){const e=URL.createObjectURL(t),r=yield Vi(e);return yield Wi(r)})}function Ji(t){return dt(this,void 0,void 0,function*(){const e={[t.type]:t},r=new ClipboardItem(e);yield navigator.clipboard.write([r])})}class nn{static async uploadCapture(e,r){const a=new FormData;a.append("image",e,r);const i=await Ce.post("/captures",a,{headers:{"Content-Type":"multipart/form-data"}});if(i.type==="error")switch(i.data.detail){case"Permission denied to save the file":{we.error("キャプチャのアップロードに失敗しました。保存先フォルダに書き込み権限がありません。");break}case"No space left on the device":{we.error("キャプチャのアップロードに失敗しました。保存先フォルダに空き容量がありません。");break}case"Unexpected error occurred while saving the file":{we.error("キャプチャのアップロードに失敗しました。保存中に予期しないエラーが発生しました。");break}default:{Number.isNaN(i.status)?(i.error.code===gt.ECONNABORTED?we.warning("キャプチャのアップロード中にサーバーへの接続が切断されました。リトライします。"):i.error.code===gt.ETIMEDOUT?we.warning("キャプチャのアップロード中にサーバーへの接続がタイムアウトしました。リトライします。"):i.error.code===gt.ERR_NETWORK?we.warning("キャプチャのアップロード中に予期しないネットワークエラーが発生しました。リトライします。"):we.warning("キャプチャのアップロードに失敗しました。リトライします。"),await this.uploadCapture(e,r)):Ce.showGenericError(i,"キャプチャのアップロードに失敗しました。");break}}}}var Zi=Symbol("getEndpoint"),Xi=t=>{const e=Hn(t);return new Proxy(e,{get(r,a,i){return a===Zi?t:Reflect.get(r,a,i)}})};const on=Xi(new Worker(new URL("/assets/CaptureCompositor-DvsLC-jx.js",import.meta.url),{}));class Yn{constructor(e,r){Pe(this,"restart_required_when_quality_switched",!1);Pe(this,"player");Pe(this,"playback_mode");Pe(this,"capture_button",null);Pe(this,"comment_capture_button",null);this.player=e,this.playback_mode=r}async init(){const e=this.player.container.querySelector(".dplayer-capture-icon"),r=this.player.container.querySelector(".dplayer-comment-capture-icon");e!==null&&e.remove(),r!==null&&r.remove(),this.player.container.querySelector(".dplayer-player-restart-icon").insertAdjacentHTML("afterend",`
            <div class="dplayer-icon dplayer-capture-icon" aria-label="キャプチャ"
                data-balloon-nofocus="" data-balloon-pos="up">
                <span class="dplayer-icon-content">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>
                </span>
            </div>
        `),this.capture_button=this.player.container.querySelector(".dplayer-capture-icon"),this.capture_button.insertAdjacentHTML("afterend",`
            <div class="dplayer-icon dplayer-comment-capture-icon" aria-label="コメントを付けてキャプチャ"
                data-balloon-nofocus="" data-balloon-pos="up">
                <span class="dplayer-icon-content">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37 32"><path d="M34.18 18.5682H24.4869C23.4829 18.5682 22.6693 19.3525 22.6693 20.32V27.314C22.6693 28.2815 23.4829 29.0658 24.4869 29.0658H26.3045V27.9118H29.916L26.1407 31.3811L26.8138 32L30.0067 29.0658H34.18C35.1835 29.0658 35.9976 28.2815 35.9976 27.314V20.32C35.9976 19.3521 35.1835 18.5682 34.18 18.5682ZM34.786 26.7441C34.786 27.3888 34.2436 27.9118 33.5744 27.9118H29.9813L29.9487 27.8817L29.916 27.9118H25.0925C24.4233 27.9118 23.8809 27.3888 23.8809 26.7441V20.9037C23.8809 20.2585 24.4233 19.7355 25.0925 19.7355H33.574C34.2432 19.7355 34.7855 19.6749 34.7855 20.3196V26.7437L34.786 26.7441ZM26.4773 22.9422C25.9521 22.9422 25.5253 23.3337 25.5253 23.8172C25.5253 24.3007 25.9516 24.6918 26.4773 24.6918C27.0033 24.6918 27.4297 24.3003 27.4297 23.8172C27.4297 23.3341 27.0033 22.9422 26.4773 22.9422ZM32.1892 22.9422C31.6631 22.9422 31.2372 23.3337 31.2372 23.8172C31.2372 24.3007 31.6631 24.6918 32.1892 24.6918C32.7152 24.6918 33.1412 24.3003 33.1412 23.8172C33.1412 23.3341 32.7152 22.9422 32.1892 22.9422ZM29.3337 22.9422C28.8076 22.9422 28.3817 23.3337 28.3817 23.8172C28.3817 24.3007 28.8076 24.6918 29.3337 24.6918C29.8589 24.6918 30.2856 24.3003 30.2856 23.8172C30.2856 23.3341 29.8593 22.9422 29.3337 22.9422Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16 23C12.691 23 10 20.309 10 17C10 13.691 12.691 11 16 11C19.309 11 22 13.691 22 17C22 20.309 19.309 23 16 23ZM16 13C13.794 13 12 14.794 12 17C12 19.206 13.794 21 16 21C18.206 21 20 19.206 20 17C20 14.794 18.206 13 16 13ZM30 9V16.4888H28V9C28 8.449 27.552 8 27 8H16C15.448 8 15 7.552 15 7C15 6.448 15.448 6 16 6H27C28.654 6 30 7.346 30 9ZM20.5905 28V26H5C4.449 26 4 25.552 4 25V9C4 8.449 4.449 8 5 8H8C8.552 8 9 7.552 9 7C9 6.448 8.552 6 8 6H5C3.346 6 2 7.346 2 9V25C2 26.654 3.346 28 5 28H20.5905ZM24 10.5C24 11.328 24.672 12 25.5 12C26.328 12 27 11.328 27 10.5C27 9.672 26.328 9 25.5 9C24.672 9 24 9.672 24 10.5ZM15 4C15 4.552 14.552 5 14 5H10C9.448 5 9 4.552 9 4C9 3.448 9.448 3 10 3H14C14.552 3 15 3.448 15 4Z"/></svg>
                </span>
            </div>
        `),this.comment_capture_button=this.player.container.querySelector(".dplayer-comment-capture-icon"),this.capture_button.addEventListener("click",()=>this.captureAndSave(!1)),this.comment_capture_button.addEventListener("click",()=>this.captureAndSave(!0)),await on.loadFonts(),console.log("[CaptureManager] Initialized.")}addHighlight(e=!1){tn(this.capture_button!==null&&this.comment_capture_button!==null),e?this.comment_capture_button.classList.add("dplayer-capturing"):this.capture_button.classList.add("dplayer-capturing")}removeHighlight(e=!1){tn(this.capture_button!==null&&this.comment_capture_button!==null),e?this.comment_capture_button.classList.remove("dplayer-capturing"):this.capture_button.classList.remove("dplayer-capturing")}createCaptureCommentData(){const e={container_width:this.player.danmaku.container.offsetWidth,container_height:this.player.danmaku.container.offsetHeight,opacity:this.player.danmaku._opacity,comments:[]},r=".dplayer-danmaku-item:not(.dplayer-danmaku-item--demo)";for(const a of this.player.danmaku.container.querySelectorAll(r)){if(a.textContent===null)continue;const i=window.getComputedStyle(a);e.comments.push({top:a.getBoundingClientRect().top-this.player.danmaku.container.getBoundingClientRect().top,left:a.getBoundingClientRect().left-this.player.danmaku.container.getBoundingClientRect().left,color:i.color,font_size:parseFloat(i.fontSize.replaceAll("px","")),text:a.textContent.trim()})}return e.comments.length===0?null:e}createCaptureExifData(){var b,v,S,j,_,R;const e=ht(),r=gr(),a=je().format(),i=this.player.plugins.aribb24Caption,d=i.isShowing===!0&&i.isPresent()?i.getTextContent():null;let l;return this.playback_mode==="Live"?l={captured_at:a,captured_playback_position:-1,network_id:e.channel.current.network_id,service_id:e.channel.current.service_id,event_id:((b=e.channel.current.program_present)==null?void 0:b.event_id)??-1,title:((v=e.channel.current.program_present)==null?void 0:v.title)??"放送休止",description:((S=e.channel.current.program_present)==null?void 0:S.description)??"",start_time:((j=e.channel.current.program_present)==null?void 0:j.start_time)??"2000-01-01T00:00:00+09:00",end_time:((_=e.channel.current.program_present)==null?void 0:_.end_time)??"2000-01-01T00:00:00+09:00",duration:((R=e.channel.current.program_present)==null?void 0:R.duration)??0,caption_text:d,is_caption_composited:!1,is_comment_composited:!1}:l={captured_at:a,captured_playback_position:-1,network_id:r.recorded_program.network_id??-1,service_id:r.recorded_program.service_id??-1,event_id:r.recorded_program.event_id??-1,title:r.recorded_program.title,description:r.recorded_program.description,start_time:r.recorded_program.start_time,end_time:r.recorded_program.end_time,duration:r.recorded_program.duration,caption_text:d,is_caption_composited:!1,is_comment_composited:!1},this.playback_mode==="Live"?l.captured_playback_position=je().diff(je(l.start_time),"second",!0):l.captured_playback_position=this.player.video.currentTime-r.recorded_program.recording_start_margin,l}async cropImageForLShapedScreen(e){const r=ye(),a=new OffscreenCanvas(e.width,e.height),i=a.getContext("2d",{alpha:!1,desynchronized:!0,willReadFrequently:!1}),p=r.settings.lshaped_screen_crop_zoom_level/100,d=r.settings.lshaped_screen_crop_x_position/100,l=r.settings.lshaped_screen_crop_y_position/100,b=r.settings.lshaped_screen_crop_zoom_origin,v=a.width/p,S=a.height/p;let j=0,_=0;switch(b){case"TopRight":j=a.width-v-(a.width-v)*d,_=(a.height-S)*l;break;case"BottomRight":j=a.width-v-(a.width-v)*d,_=a.height-S-(a.height-S)*l;break;case"TopLeft":j=(a.width-v)*d,_=(a.height-S)*l;break;case"BottomLeft":j=(a.width-v)*d,_=a.height-S-(a.height-S)*l;break}return i.drawImage(e,j,_,v,S,0,0,a.width,a.height),await createImageBitmap(a)}async captureAndSave(e){const r=ht(),a=gr(),i=ye(),p=be.time();if(this.playback_mode==="Live"&&r.channel.current.is_radiochannel===!0){this.player.notice("ラジオチャンネルはキャプチャできません。",void 0,void 0,"#FF6F6A");return}if(this.player.video.videoWidth===0&&this.player.video.videoHeight===0){this.player.notice("読み込み中はキャプチャできません。",void 0,void 0,"#FF6F6A");return}if(e===!0&&this.player.danmaku.showing===!1){this.player.notice("コメントを付けてキャプチャするには、コメント表示をオンにしてください。",void 0,void 0,"#FF6F6A");return}this.addHighlight(e);const d=this.player.plugins.aribb24Caption,l=this.player.plugins.aribb24Superimpose??null,b=d.getRawCanvas(),v=(l==null?void 0:l.getRawCanvas())??null,S=d.isShowing===!0&&d.isPresent(),j=l&&l.isShowing===!0&&l.isPresent(),_=await Promise.all([createImageBitmap(this.player.video),S?createImageBitmap(b):null,j?createImageBitmap(v):null]);let R=_[0];i.settings.lshaped_screen_crop_enabled&&(R=await this.cropImageForLShapedScreen(R));const G=_[1],V=_[2],K=e?this.createCaptureCommentData():null,U=this.createCaptureExifData(),E=[R,G,V].filter(Q=>Q!==null);console.log("\x1B[36m[CaptureManager] Composite start:");const O=be.time(),C=await(await new on(Wn({mode:i.settings.capture_caption_mode,capture:R,caption:G,superimpose:V,capture_comment_data:K,capture_exif_data:U},E))).composite();console.log("\x1B[36m[CaptureManager] Composite end:",be.mathFloor(be.time()-O,3),"sec");const L=Yn.generateCaptureFilename(),D=`${L}.jpg`,Y=`${L}_caption.jpg`;C.capture_normal!==null&&(a.event_emitter.emit("CaptureCompleted",{capture:C.capture_normal,filename:D}),["Browser","Both"].includes(i.settings.capture_save_mode)&&be.downloadBlobData(C.capture_normal,D),["UploadServer","Both"].includes(i.settings.capture_save_mode)&&nn.uploadCapture(C.capture_normal,D)),C.capture_caption!==null&&(a.event_emitter.emit("CaptureCompleted",{capture:C.capture_caption,filename:D}),["Browser","Both"].includes(i.settings.capture_save_mode)&&be.downloadBlobData(C.capture_caption,Y),["UploadServer","Both"].includes(i.settings.capture_save_mode)&&nn.uploadCapture(C.capture_caption,Y));const q=be.mathFloor(be.time()-p,3);if(q<.1?setTimeout(()=>this.removeHighlight(e),100):this.removeHighlight(e),console.log("\x1B[36m[CaptureManager] Total:",q,"sec"),i.settings.capture_copy_to_clipboard===!0){for(const Q of[C.capture_normal,C.capture_caption])if(Q!==null)try{await Ji(await Yi(Q))}catch(te){this.player.notice("クリップボードへのキャプチャのコピーに失敗しました。",void 0,void 0,"#FF6F6A"),console.error(te)}}}async destroy(){console.log("[CaptureManager] Destroyed.")}static generateCaptureFilename(){const e=ht(),a=ye().settings.capture_filename_pattern,i=je(),p=e.channel.current.id==="NID0-SID0"?structuredClone(to):e.channel.current,d=p.program_present??structuredClone(ro);p.id==="NID0-SID0"&&(p.service_id=1024,p.name="アフリカ中央テレビ",p.remocon_id=9,d.event_id=65535,d.title="[二][字]今日のニュース",d.start_time="2024-04-01T12:00:00+09:00",d.end_time="2024-04-01T12:15:00+09:00",d.duration=15*60*1e3);const l=je(d.start_time),b=je(d.end_time),v=eo.duration(b.diff(l)),S={"%date%":i.format("YYYYMMDD"),"%year%":i.format("YYYY"),"%year2%":i.format("YY"),"%month%":i.format("M"),"%month2%":i.format("MM"),"%day%":i.format("D"),"%day2%":i.format("DD"),"%time%":i.format("HHmmss"),"%hour%":i.format("H"),"%hour2%":i.format("HH"),"%minute%":i.format("m"),"%minute2%":i.format("mm"),"%second%":i.format("s"),"%second2%":i.format("ss"),"%day-of-week%":i.format("ddd"),"%start-date%":l.format("YYYYMMDD"),"%start-year%":l.format("YYYY"),"%start-year2%":l.format("YY"),"%start-month%":l.format("M"),"%start-month2%":l.format("MM"),"%start-day%":l.format("D"),"%start-day2%":l.format("DD"),"%start-time%":l.format("HHmmss"),"%start-hour%":l.format("H"),"%start-hour2%":l.format("HH"),"%start-minute%":l.format("m"),"%start-minute2%":l.format("mm"),"%start-second%":l.format("s"),"%start-second2%":l.format("ss"),"%start-day-of-week%":l.format("ddd"),"%end-date%":b.format("YYYYMMDD"),"%end-year%":b.format("YYYY"),"%end-year2%":b.format("YY"),"%end-month%":b.format("M"),"%end-month2%":b.format("MM"),"%end-day%":b.format("D"),"%end-day2%":b.format("DD"),"%end-time%":b.format("HHmmss"),"%end-hour%":b.format("H"),"%end-hour2%":b.format("HH"),"%end-minute%":b.format("m"),"%end-minute2%":b.format("mm"),"%end-second%":b.format("s"),"%end-second2%":b.format("ss"),"%end-day-of-week%":b.format("ddd"),"%event-duration-hour%":v.hours().toString(),"%event-duration-hour2%":v.hours().toString().padStart(2,"0"),"%event-duration-min%":v.minutes().toString(),"%event-duration-min2%":v.minutes().toString().padStart(2,"0"),"%event-duration-sec%":v.seconds().toString(),"%event-duration-sec2%":v.seconds().toString().padStart(2,"0"),"%channel-name%":p.name,"%channel-no%":p.remocon_id.toString(),"%channel-no2%":p.remocon_id.toString().padStart(2,"0"),"%channel-no3%":p.remocon_id.toString().padStart(3,"0"),"%event-name%":d.title,"%event-id%":d.event_id.toString(),"%service-name%":p.name,"%service-id%":p.service_id.toString()},j=Object.keys(S).sort((R,G)=>G.length-R.length),_=new RegExp(j.map(R=>R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),"g");return a.replace(_,R=>S[R])}}export{Yn as C,tc as V,tn as a,Hi as p,gr as u,Xi as w};

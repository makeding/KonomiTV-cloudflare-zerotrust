import{d as q,u as w,q as i,s as y,x as B,z as M,c as S,a as u,b as _,B as b,o as R,_ as V}from"./index-B7OgWKtM.js";import{B as x,R as N}from"./RecordedProgramList-c8g7Jb3l.js";import{H as O,N as P}from"./Navigation-CnqcZDIH.js";import{V as k}from"./Videos-d0PD3lY7.js";import"./VDialog-B5uyaSNw.js";import"./VChip-CXvR9eN_.js";import"./VTextField-Cn4WKwf3.js";import"./VAvatar-CxE9IZav.js";import"./VCard-CZrRuC1N.js";import"./ssrBoot-CgU2lsL7.js";import"./VSelect-9qvNrm53.js";const E={class:"route-container"},I={class:"mylist-container-wrapper"},L={class:"mylist-container"},H=q({__name:"Mylist",setup(U){const a=M(),g=b(),v=w(),n=i([]),l=i(0),r=i(!0),o=i(1),t=i("mylist_added_desc"),p=async()=>{const e=v.settings.mylist.filter(s=>s.type==="RecordedProgram").sort((s,m)=>{switch(t.value){case"mylist_added_desc":return m.created_at-s.created_at;case"mylist_added_asc":return s.created_at-m.created_at;case"recorded_desc":case"recorded_asc":return m.created_at-s.created_at;default:return 0}}).map(s=>s.id);if(e.length===0){n.value=[],l.value=0,r.value=!1;return}let d="ids";t.value==="recorded_desc"?d="desc":t.value==="recorded_asc"&&(d="asc");const c=await k.fetchVideos(d,o.value,e);c&&(n.value=c.recorded_programs,l.value=c.total),r.value=!1},f=async e=>{o.value=e,r.value=!0,await g.replace({query:{...a.query,page:e.toString()}})},h=async e=>{t.value=e,o.value=1,r.value=!0,await g.replace({query:{...a.query,order:e,page:"1"}})};return y(()=>a.query,async e=>{e.page&&(o.value=parseInt(e.page)),e.order&&(t.value=e.order),await p()},{deep:!0}),y(()=>v.settings.mylist,async()=>{await p()},{deep:!0}),B(async()=>{a.query.page&&(o.value=parseInt(a.query.page)),a.query.order&&(t.value=a.query.order),await p()}),(e,d)=>(R(),S("div",E,[u(O),_("main",null,[u(P),_("div",I,[_("div",L,[u(x,{crumbs:[{name:"ホーム",path:"/"},{name:"マイリスト",path:"/mylist/",disabled:!0}]}),u(N,{title:"マイリスト",programs:n.value,total:l.value,page:o.value,sortOrder:t.value,isLoading:r.value,showBackButton:!0,showEmptyMessage:!r.value,emptyMessage:"マイリストに録画番組が<br class='d-sm-none'>追加されていません。",emptySubMessage:"録画番組の右上にある「＋」ボタンから、<br class='d-sm-none'>マイリストに番組を追加できます。",forMylist:!0,"onUpdate:page":f,"onUpdate:sortOrder":d[0]||(d[0]=c=>h(c))},null,8,["programs","total","page","sortOrder","isLoading","showEmptyMessage"])])])])]))}}),X=V(H,[["__scopeId","data-v-a0aee57a"]]);export{X as default};
